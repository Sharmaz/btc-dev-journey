"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[80],{9806(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"cross-cutting/privacy/index","title":"Privacy","description":"Bitcoin privacy techniques - coin control, CoinJoin, Tor, and chain analysis countermeasures","source":"@site/docs/cross-cutting/privacy/index.md","sourceDirName":"cross-cutting/privacy","slug":"/cross-cutting/privacy/","permalink":"/docs/cross-cutting/privacy/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Privacy","description":"Bitcoin privacy techniques - coin control, CoinJoin, Tor, and chain analysis countermeasures"},"sidebar":"guideSidebar","previous":{"title":"Security","permalink":"/docs/cross-cutting/security/"},"next":{"title":"Sidechains & Layer 2","permalink":"/docs/cross-cutting/sidechains-l2/"}}');var r=i(4848),t=i(8453);const o={sidebar_position:2,title:"Privacy",description:"Bitcoin privacy techniques - coin control, CoinJoin, Tor, and chain analysis countermeasures"},c="Privacy",a={},l=[{value:"Why Privacy Matters",id:"why-privacy-matters",level:2},{value:"On-Chain Privacy Threats",id:"on-chain-privacy-threats",level:2},{value:"Common Heuristics Used in Chain Analysis",id:"common-heuristics-used-in-chain-analysis",level:3},{value:"Privacy Techniques",id:"privacy-techniques",level:2},{value:"Coin Control",id:"coin-control",level:3},{value:"CoinJoin",id:"coinjoin",level:3},{value:"PayJoin (BIP-78)",id:"payjoin-bip-78",level:3},{value:"Network-Level Privacy",id:"network-level-privacy",level:3},{value:"Tor",id:"tor",level:4},{value:"Dandelion++ (BIP-156)",id:"dandelion-bip-156",level:4},{value:"Silent Payments (BIP-352)",id:"silent-payments-bip-352",level:3},{value:"Privacy for Developers",id:"privacy-for-developers",level:2},{value:"Recommended Reading",id:"recommended-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"privacy",children:"Privacy"})}),"\n",(0,r.jsx)(n.p,{children:"Bitcoin is pseudonymous, not anonymous. Every transaction is publicly recorded on the blockchain. Without deliberate privacy practices, it's often possible to link transactions to real-world identities. Understanding privacy is essential for every Bitcoin developer."}),"\n",(0,r.jsx)(n.h2,{id:"why-privacy-matters",children:"Why Privacy Matters"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fungibility"}),' \u2014 If coins can be traced and "tainted," Bitcoin loses fungibility (all coins should be equal)']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Personal safety"})," \u2014 Public balances can make users targets for theft"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business confidentiality"})," \u2014 Companies don't want competitors seeing their transactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Financial freedom"})," \u2014 Surveillance-resistant money is a core Bitcoin value"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"on-chain-privacy-threats",children:"On-Chain Privacy Threats"}),"\n",(0,r.jsx)(n.h3,{id:"common-heuristics-used-in-chain-analysis",children:"Common Heuristics Used in Chain Analysis"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Heuristic"}),(0,r.jsx)(n.th,{children:"How It Works"}),(0,r.jsx)(n.th,{children:"Countermeasure"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Address reuse"})}),(0,r.jsx)(n.td,{children:"Same address used multiple times links transactions"}),(0,r.jsx)(n.td,{children:"Generate a new address for every receive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Common input ownership"})}),(0,r.jsx)(n.td,{children:"Inputs in the same transaction likely belong to the same wallet"}),(0,r.jsx)(n.td,{children:"CoinJoin, PayJoin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Change detection"})}),(0,r.jsx)(n.td,{children:"Identify which output is change vs. payment"}),(0,r.jsx)(n.td,{children:"Avoid round amounts, use same address type"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Timing analysis"})}),(0,r.jsx)(n.td,{children:"Transaction timing correlates with user activity"}),(0,r.jsx)(n.td,{children:"Delayed broadcasting"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Amount correlation"})}),(0,r.jsx)(n.td,{children:"Match input/output amounts across transactions"}),(0,r.jsx)(n.td,{children:"Break amounts with CoinJoin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Dust attacks"})}),(0,r.jsx)(n.td,{children:"Small UTXOs sent to track spending"}),(0,r.jsx)(n.td,{children:"Coin control, ignore dust"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"privacy-techniques",children:"Privacy Techniques"}),"\n",(0,r.jsx)(n.h3,{id:"coin-control",children:"Coin Control"}),"\n",(0,r.jsx)(n.p,{children:"Coin control lets users choose which UTXOs to spend in a transaction, preventing unwanted linkage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# List UTXOs with labels\nbitcoin-cli listunspent\n\n# Send using specific UTXOs\nbitcoin-cli -named send outputs=\'{"bc1q...": 0.5}\' \\\n  options=\'{"inputs": [{"txid": "abc...", "vout": 0}]}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"Every wallet that handles privacy should implement coin control. Users need to decide which coins to combine in a transaction."}),"\n",(0,r.jsx)(n.h3,{id:"coinjoin",children:"CoinJoin"}),"\n",(0,r.jsx)(n.p,{children:"CoinJoin combines multiple users' transactions into one, breaking the link between inputs and outputs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Traditional transaction:\n  Alice (1 BTC) \u2192 Bob (0.8 BTC) + Alice change (0.2 BTC)\n\nCoinJoin:\n  Alice (1 BTC)  \u2510     \u250c ? (0.5 BTC)\n  Bob (0.5 BTC)  \u251c\u2500tx\u2500\u2192\u251c ? (0.5 BTC)\n  Carol (0.5 BTC)\u2518     \u251c ? (0.5 BTC)\n                        \u2514 ? (0.5 BTC)\n"})}),"\n",(0,r.jsx)(n.p,{children:"With equal-sized outputs, an observer can't determine which input funded which output."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Implementations:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/JoinMarket-Org/joinmarket-clientserver",children:"Joinmarket"})," \u2014 Maker/taker model, decentralized"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://wasabiwallet.io/",children:"Wasabi Wallet"})," \u2014 Integrated CoinJoin with WabiSabi protocol"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"payjoin-bip-78",children:"PayJoin (BIP-78)"}),"\n",(0,r.jsx)(n.p,{children:"PayJoin involves the receiver contributing an input to the transaction, breaking the common-input-ownership heuristic:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Normal payment:\n  Sender input \u2192 Receiver output + Sender change\n\nPayJoin:\n  Sender input + Receiver input \u2192 Receiver output + Sender change\n"})}),"\n",(0,r.jsx)(n.p,{children:"To an observer, it looks like all inputs belong to the sender \u2014 which they don't. This improves privacy for both parties."}),"\n",(0,r.jsx)(n.h3,{id:"network-level-privacy",children:"Network-Level Privacy"}),"\n",(0,r.jsx)(n.h4,{id:"tor",children:"Tor"}),"\n",(0,r.jsx)(n.p,{children:"Running Bitcoin Core over Tor hides your IP address from peers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# bitcoin.conf\nproxy=127.0.0.1:9050\nlisten=1\nonlynet=onion\n"})}),"\n",(0,r.jsx)(n.h4,{id:"dandelion-bip-156",children:"Dandelion++ (BIP-156)"}),"\n",(0,r.jsx)(n.p,{children:"Dandelion++ changes how transactions propagate to prevent linking a transaction to the originating IP:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stem phase"})," \u2014 Transaction is relayed through a random path of nodes (one at a time)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fluff phase"})," \u2014 Transaction is broadcast normally to the full network"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This makes it difficult for spy nodes to determine which node originated a transaction."}),"\n",(0,r.jsx)(n.h3,{id:"silent-payments-bip-352",children:"Silent Payments (BIP-352)"}),"\n",(0,r.jsx)(n.p,{children:"Silent Payments allow receiving to a static public identifier without address reuse:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Receiver publishes a ",(0,r.jsx)(n.strong,{children:"silent payment address"})," (static, reusable)"]}),"\n",(0,r.jsx)(n.li,{children:"Sender derives a unique on-chain address using ECDH"}),"\n",(0,r.jsx)(n.li,{children:"Each payment goes to a different address on-chain"}),"\n",(0,r.jsx)(n.li,{children:"No interaction between sender and receiver required"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This solves the address reuse problem without requiring a server or interaction."}),"\n",(0,r.jsx)(n.h2,{id:"privacy-for-developers",children:"Privacy for Developers"}),"\n",(0,r.jsx)(n.p,{children:"When building Bitcoin applications:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default to privacy"})," \u2014 Generate new addresses by default, never reuse"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement coin control"})," \u2014 Let users choose which UTXOs to spend"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Avoid unnecessary data collection"})," \u2014 Don't log IP addresses with transactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use your own node"})," \u2014 Don't leak user addresses to third-party APIs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Support Tor"})," \u2014 Allow users to connect via Tor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Label UTXOs"})," \u2014 Help users understand the provenance of their coins"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consider PayJoin"})," \u2014 Implement BIP-78 for receiving payments"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"recommended-reading",children:"Recommended Reading"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://en.bitcoin.it/wiki/Privacy",children:"Bitcoin Privacy Wiki"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki",children:"BIP-78: PayJoin"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0352.mediawiki",children:"BIP-352: Silent Payments"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://bitcoin.design/guide/how-it-works/privacy/",children:"Bitcoin Design Guide: Privacy"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://oxt.me/",children:"OXT Research"})," \u2014 Chain analysis and privacy research"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);