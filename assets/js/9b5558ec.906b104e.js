"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[4443],{5650(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tracks/protocol-developer/languages-tools/index","title":"Languages & Tools","description":"Programming languages and development tools used in Bitcoin Core development","source":"@site/docs/tracks/protocol-developer/02-languages-tools/index.md","sourceDirName":"tracks/protocol-developer/02-languages-tools","slug":"/tracks/protocol-developer/languages-tools/","permalink":"/docs/tracks/protocol-developer/languages-tools/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Languages & Tools","description":"Programming languages and development tools used in Bitcoin Core development"},"sidebar":"guideSidebar","previous":{"title":"Consensus Rules","permalink":"/docs/tracks/protocol-developer/bitcoin-core-internals/consensus"},"next":{"title":"Testing","permalink":"/docs/tracks/protocol-developer/testing/"}}');var o=s(4848),i=s(8453);const r={sidebar_position:2,title:"Languages & Tools",description:"Programming languages and development tools used in Bitcoin Core development"},l="Languages & Tools",d={},c=[{value:"C++ in Bitcoin Core",id:"c-in-bitcoin-core",level:2},{value:"Style and Conventions",id:"style-and-conventions",level:3},{value:"Key C++ Features Used",id:"key-c-features-used",level:3},{value:"Thread Safety",id:"thread-safety",level:3},{value:"Python Test Framework",id:"python-test-framework",level:2},{value:"Writing a Functional Test",id:"writing-a-functional-test",level:3},{value:"Development Tools",id:"development-tools",level:2},{value:"Debugging Bitcoin Core",id:"debugging-bitcoin-core",level:3},{value:"Recommended Reading",id:"recommended-reading",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"languages--tools",children:"Languages & Tools"})}),"\n",(0,o.jsx)(n.p,{children:"Bitcoin Core development primarily uses C++ for the main codebase and Python for the test framework. Understanding the specific C++ idioms and tooling used in the project is essential."}),"\n",(0,o.jsx)(n.h2,{id:"c-in-bitcoin-core",children:"C++ in Bitcoin Core"}),"\n",(0,o.jsxs)(n.p,{children:["Bitcoin Core uses ",(0,o.jsx)(n.strong,{children:"modern C++"})," (currently C++20). The project has specific coding conventions:"]}),"\n",(0,o.jsx)(n.h3,{id:"style-and-conventions",children:"Style and Conventions"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Naming"}),": ",(0,o.jsx)(n.code,{children:"CamelCase"})," for classes, ",(0,o.jsx)(n.code,{children:"snake_case"})," for functions and variables"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Prefix"}),": ",(0,o.jsx)(n.code,{children:"C"})," prefix for classes (",(0,o.jsx)(n.code,{children:"CBlock"}),", ",(0,o.jsx)(n.code,{children:"CTransaction"}),"), ",(0,o.jsx)(n.code,{children:"m_"})," for member variables"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Smart pointers"}),": ",(0,o.jsx)(n.code,{children:"std::unique_ptr"})," and ",(0,o.jsx)(n.code,{children:"std::shared_ptr"})," over raw pointers"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"No exceptions in consensus code"})," \u2014 Error handling via return values"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"No RTTI"})," \u2014 Runtime type information is disabled"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"key-c-features-used",children:"Key C++ Features Used"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-cpp",children:"// std::optional for nullable values\nstd::optional<CBlockIndex*> FindBlock(const uint256& hash);\n\n// Span for non-owning views\nbool VerifyScript(Span<const unsigned char> scriptSig, ...);\n\n// Structured bindings\nauto [iter, inserted] = mapBlockIndex.emplace(hash, new_index);\n\n// RAII patterns for locks\nLOCK(cs_main);  // Acquires mutex, released at scope exit\n"})}),"\n",(0,o.jsx)(n.h3,{id:"thread-safety",children:"Thread Safety"}),"\n",(0,o.jsxs)(n.p,{children:["Bitcoin Core uses ",(0,o.jsx)(n.strong,{children:"annotations"})," to enforce thread safety at compile time:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-cpp",children:"// Annotated mutexes\nRecursiveMutex cs_main ACQUIRED_BEFORE(cs_wallet);\n\n// Variables guarded by specific mutexes\nint nBestHeight GUARDED_BY(cs_main);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"python-test-framework",children:"Python Test Framework"}),"\n",(0,o.jsxs)(n.p,{children:["The functional test suite (",(0,o.jsx)(n.code,{children:"test/functional/"}),") is written in Python and is critical for protocol developers:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Run all functional tests\ntest/functional/test_runner.py\n\n# Run a specific test\ntest/functional/test_runner.py wallet_basic.py\n\n# Run with verbose output\ntest/functional/feature_block.py --loglevel=debug\n"})}),"\n",(0,o.jsx)(n.h3,{id:"writing-a-functional-test",children:"Writing a Functional Test"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from test_framework.test_framework import BitcoinTestFramework\nfrom test_framework.util import assert_equal\n\nclass ExampleTest(BitcoinTestFramework):\n    def set_test_params(self):\n        self.num_nodes = 2\n\n    def run_test(self):\n        # Mine some blocks\n        self.generate(self.nodes[0], 101)\n\n        # Check balance\n        balance = self.nodes[0].getbalance()\n        assert_equal(balance, 50)\n\n        # Send funds and verify\n        txid = self.nodes[0].sendtoaddress(\n            self.nodes[1].getnewaddress(), 10\n        )\n        self.generate(self.nodes[0], 1)\n        assert_equal(self.nodes[1].getbalance(), 10)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"development-tools",children:"Development Tools"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Tool"}),(0,o.jsx)(n.th,{children:"Purpose"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"gdb"})," / ",(0,o.jsx)(n.code,{children:"lldb"})]}),(0,o.jsx)(n.td,{children:"Debugger for C++"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"valgrind"})}),(0,o.jsx)(n.td,{children:"Memory error detection"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"clang-format"})}),(0,o.jsxs)(n.td,{children:["Code formatting (project has ",(0,o.jsx)(n.code,{children:".clang-format"}),")"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"clang-tidy"})}),(0,o.jsx)(n.td,{children:"Static analysis"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ccache"})}),(0,o.jsx)(n.td,{children:"Compiler cache for faster rebuilds"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"bear"})}),(0,o.jsxs)(n.td,{children:["Generates ",(0,o.jsx)(n.code,{children:"compile_commands.json"})," for IDE support"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"flamegraph"})}),(0,o.jsx)(n.td,{children:"Performance profiling visualization"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"debugging-bitcoin-core",children:"Debugging Bitcoin Core"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Build with debug symbols\ncmake -B build -DCMAKE_BUILD_TYPE=Debug\ncmake --build build\n\n# Run under debugger\ngdb --args ./build/src/bitcoind -regtest\n\n# Useful GDB commands\n(gdb) break validation.cpp:ProcessNewBlock\n(gdb) run\n(gdb) bt    # backtrace\n(gdb) p block.GetHash().ToString()  # print expression\n"})}),"\n",(0,o.jsx)(n.h2,{id:"recommended-reading",children:"Recommended Reading"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md",children:"Bitcoin Core Developer Notes"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://isocpp.github.io/CppCoreGuidelines/",children:"C++ Core Guidelines"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/test/functional/README.md",children:"Functional Test Framework Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>l});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);