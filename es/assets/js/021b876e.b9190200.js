"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[6404],{4677(e,s,i){i.r(s),i.d(s,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"tracks/application-developer/wallet-development/index","title":"Desarrollo de Wallets","description":"Construyendo wallets Bitcoin - derivaci\xf3n de claves HD, selecci\xf3n de monedas y gesti\xf3n de claves","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/tracks/application-developer/02-wallet-development/index.md","sourceDirName":"tracks/application-developer/02-wallet-development","slug":"/tracks/application-developer/wallet-development/","permalink":"/es/docs/tracks/application-developer/wallet-development/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Desarrollo de Wallets","description":"Construyendo wallets Bitcoin - derivaci\xf3n de claves HD, selecci\xf3n de monedas y gesti\xf3n de claves"},"sidebar":"guideSidebar","previous":{"title":"Go","permalink":"/es/docs/tracks/application-developer/libraries-sdks/go"},"next":{"title":"Procesamiento de Pagos","permalink":"/es/docs/tracks/application-developer/payment-processing/"}}');var r=i(4848),a=i(8453);const d={sidebar_position:2,title:"Desarrollo de Wallets",description:"Construyendo wallets Bitcoin - derivaci\xf3n de claves HD, selecci\xf3n de monedas y gesti\xf3n de claves"},l="Desarrollo de Wallets",t={},c=[{value:"HD Wallets (Determin\xedsticos Jer\xe1rquicos)",id:"hd-wallets-determin\xedsticos-jer\xe1rquicos",level:2},{value:"BIP-32: Derivaci\xf3n de Claves HD",id:"bip-32-derivaci\xf3n-de-claves-hd",level:3},{value:"BIP-39: Frases Semilla Mnem\xf3nicas",id:"bip-39-frases-semilla-mnem\xf3nicas",level:3},{value:"BIP-44/49/84/86: Rutas de Derivaci\xf3n",id:"bip-44498486-rutas-de-derivaci\xf3n",level:3},{value:"Descriptores",id:"descriptores",level:2},{value:"Selecci\xf3n de Monedas",id:"selecci\xf3n-de-monedas",level:2},{value:"Estrategias",id:"estrategias",level:3},{value:"Consideraciones",id:"consideraciones",level:3},{value:"PSBT (Transacciones Bitcoin Parcialmente Firmadas)",id:"psbt-transacciones-bitcoin-parcialmente-firmadas",level:2},{value:"Consideraciones de Seguridad",id:"consideraciones-de-seguridad",level:2},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"desarrollo-de-wallets",children:"Desarrollo de Wallets"})}),"\n",(0,r.jsx)(s.p,{children:"Un wallet Bitcoin es mucho m\xe1s que mostrar un saldo. Gestiona claves, construye transacciones, selecciona qu\xe9 UTXOs gastar, estima comisiones y lleva registro de tu historial de transacciones. Construir un wallet seguro es una de las tareas m\xe1s importantes (y desafiantes) en el desarrollo Bitcoin."}),"\n",(0,r.jsx)(s.h2,{id:"hd-wallets-determin\xedsticos-jer\xe1rquicos",children:"HD Wallets (Determin\xedsticos Jer\xe1rquicos)"}),"\n",(0,r.jsx)(s.p,{children:"Los wallets modernos usan una estructura de \xe1rbol para derivar todas las claves desde una \xfanica semilla:"}),"\n",(0,r.jsx)(s.h3,{id:"bip-32-derivaci\xf3n-de-claves-hd",children:"BIP-32: Derivaci\xf3n de Claves HD"}),"\n",(0,r.jsx)(s.p,{children:"Una semilla maestra genera un \xe1rbol de pares de claves:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Master Seed\n  \u2514\u2500\u2500 m (master key)\n       \u251c\u2500\u2500 m/0  (child 0)\n       \u2502    \u251c\u2500\u2500 m/0/0\n       \u2502    \u2514\u2500\u2500 m/0/1\n       \u2514\u2500\u2500 m/1  (child 1)\n            \u251c\u2500\u2500 m/1/0\n            \u2514\u2500\u2500 m/1/1\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Derivaci\xf3n hardened vs. normal:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Normal (",(0,r.jsx)(s.code,{children:"m/0/1"}),"): Las claves p\xfablicas hijas pueden derivarse de la clave p\xfablica padre"]}),"\n",(0,r.jsxs)(s.li,{children:["Hardened (",(0,r.jsx)(s.code,{children:"m/0'/1'"}),"): Requiere la clave privada padre \u2014 m\xe1s seguro"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"bip-39-frases-semilla-mnem\xf3nicas",children:"BIP-39: Frases Semilla Mnem\xf3nicas"}),"\n",(0,r.jsx)(s.p,{children:"Las frases de 12 o 24 palabras que respaldan un wallet:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"abandon abandon abandon ... about  \u2192  Entropy  \u2192  Seed  \u2192  Master Key\n"})}),"\n",(0,r.jsx)(s.p,{children:"El mnem\xf3nico codifica entrop\xeda (128 o 256 bits) con un checksum. Combinado con una passphrase opcional, produce la semilla maestra."}),"\n",(0,r.jsx)(s.h3,{id:"bip-44498486-rutas-de-derivaci\xf3n",children:"BIP-44/49/84/86: Rutas de Derivaci\xf3n"}),"\n",(0,r.jsx)(s.p,{children:"Las rutas est\xe1ndar definen d\xf3nde viven las claves en el \xe1rbol HD:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"BIP"}),(0,r.jsx)(s.th,{children:"Ruta"}),(0,r.jsx)(s.th,{children:"Tipo de Direcci\xf3n"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"BIP-44"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"m/44'/0'/0'/0/i"})}),(0,r.jsx)(s.td,{children:"Legacy P2PKH (1...)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"BIP-49"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"m/49'/0'/0'/0/i"})}),(0,r.jsx)(s.td,{children:"Wrapped SegWit P2SH-P2WPKH (3...)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"BIP-84"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"m/84'/0'/0'/0/i"})}),(0,r.jsx)(s.td,{children:"Native SegWit P2WPKH (bc1q...)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"BIP-86"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"m/86'/0'/0'/0/i"})}),(0,r.jsx)(s.td,{children:"Taproot P2TR (bc1p...)"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["Componentes de la ruta: ",(0,r.jsx)(s.code,{children:"purpose' / coin_type' / account' / change / address_index"})]}),"\n",(0,r.jsx)(s.h2,{id:"descriptores",children:"Descriptores"}),"\n",(0,r.jsx)(s.p,{children:"Los output descriptors son una forma moderna de describir qu\xe9 puede gastar un wallet:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# Native SegWit wallet\nwpkh([fingerprint/84'/0'/0']xpub.../0/*)\n\n# 2-of-3 multisig\nwsh(sortedmulti(2, [fp1/48'/0'/0'/2']xpub1/0/*, [fp2/...]xpub2/0/*, [fp3/...]xpub3/0/*))\n\n# Taproot\ntr([fingerprint/86'/0'/0']xpub.../0/*)\n"})}),"\n",(0,r.jsx)(s.p,{children:"Los descriptores son el enfoque preferido para nuevas implementaciones de wallets. BDK est\xe1 construido completamente alrededor de descriptores."}),"\n",(0,r.jsx)(s.h2,{id:"selecci\xf3n-de-monedas",children:"Selecci\xf3n de Monedas"}),"\n",(0,r.jsx)(s.p,{children:"Al gastar Bitcoin, el wallet debe elegir qu\xe9 UTXOs usar como inputs. Esto no es trivial:"}),"\n",(0,r.jsx)(s.h3,{id:"estrategias",children:"Estrategias"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Estrategia"}),(0,r.jsx)(s.th,{children:"Descripci\xf3n"}),(0,r.jsx)(s.th,{children:"Compromiso"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Mayor primero"})}),(0,r.jsx)(s.td,{children:"Usar los UTXOs m\xe1s grandes primero"}),(0,r.jsx)(s.td,{children:"Simple, pero crea muchos outputs de cambio peque\xf1os"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Menor primero"})}),(0,r.jsx)(s.td,{children:"Usar los UTXOs m\xe1s peque\xf1os primero"}),(0,r.jsx)(s.td,{children:"Consolida dust, pero comisiones m\xe1s altas"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Branch and Bound"})}),(0,r.jsx)(s.td,{children:"Encontrar coincidencia exacta (sin cambio)"}),(0,r.jsx)(s.td,{children:"\xd3ptimo cuando es posible, computacionalmente costoso"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Aleatorio"})}),(0,r.jsx)(s.td,{children:"Selecci\xf3n aleatoria con objetivo"}),(0,r.jsx)(s.td,{children:"Buena privacidad, impredecible"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Knapsack"})}),(0,r.jsx)(s.td,{children:"Aproximar objetivo con m\xednimo desperdicio"}),(0,r.jsx)(s.td,{children:"Enfoque hist\xf3rico de Bitcoin Core"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"consideraciones",children:"Consideraciones"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Minimizaci\xf3n de comisiones"})," \u2014 Menos inputs = menor comisi\xf3n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Privacidad"})," \u2014 Evitar vincular UTXOs de diferentes fuentes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Output de cambio"})," \u2014 Un output extra cuesta ~34 bytes; evitar si es posible"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Evitar dust"})," \u2014 No crear cambio por debajo del umbral de dust (~546 sats)"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"psbt-transacciones-bitcoin-parcialmente-firmadas",children:"PSBT (Transacciones Bitcoin Parcialmente Firmadas)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki",children:"BIP-174"})," define un formato est\xe1ndar para transacciones sin firmar/parcialmente firmadas. Esto permite:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Firmado con hardware wallet"})," \u2014 Crear transacci\xf3n en computadora, firmar en dispositivo"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Flujos multisig"})," \u2014 Cada firmante agrega su firma independientemente"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"CoinJoin"})," \u2014 M\xfaltiples partes contribuyen inputs y firman por separado"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Creator \u2192 Updater \u2192 Signer \u2192 Combiner \u2192 Finalizer \u2192 Extractor\n"})}),"\n",(0,r.jsx)(s.h2,{id:"consideraciones-de-seguridad",children:"Consideraciones de Seguridad"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nunca almacenes claves privadas en texto plano"})," \u2014 Encripta en reposo"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Usa hardware wallets para fondos significativos"})," \u2014 Las claves nunca salen del dispositivo"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Implementa verificaci\xf3n de direcciones"})," \u2014 Mostrar direcciones en dispositivo hardware"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Prueba en regtest/testnet primero"})," \u2014 Siempre prueba antes de mainnet"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Respalda la frase semilla de forma segura"})," \u2014 Respaldo en metal, m\xfaltiples ubicaciones"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki",children:"BIP-32: HD Wallets"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki",children:"BIP-39: Mnemonic Code"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/doc/descriptors.md",children:"Output Descriptors (Bitcoin Core)"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki",children:"BIP-174: PSBT"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://bitcoin.design/guide/designing-products/personal-finance/",children:"Bitcoin Design Guide: Wallet"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,s,i){i.d(s,{R:()=>d,x:()=>l});var n=i(6540);const r={},a=n.createContext(r);function d(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);