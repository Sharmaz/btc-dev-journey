"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[806],{7345(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"fundamentals/p2p-network/index","title":"Red P2P","description":"C\xf3mo funciona la red peer-to-peer de Bitcoin y la comunicaci\xf3n entre nodos","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/fundamentals/03-p2p-network/index.md","sourceDirName":"fundamentals/03-p2p-network","slug":"/fundamentals/p2p-network/","permalink":"/es/docs/fundamentals/p2p-network/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Red P2P","description":"C\xf3mo funciona la red peer-to-peer de Bitcoin y la comunicaci\xf3n entre nodos"},"sidebar":"guideSidebar","previous":{"title":"Arquitectura de Bitcoin","permalink":"/es/docs/fundamentals/bitcoin-architecture/"},"next":{"title":"Desarrollo B\xe1sico","permalink":"/es/docs/fundamentals/basic-development/"}}');var d=s(4848),i=s(8453);const r={sidebar_position:4,title:"Red P2P",description:"C\xf3mo funciona la red peer-to-peer de Bitcoin y la comunicaci\xf3n entre nodos"},a="Red P2P",c={},l=[{value:"Protocolo de Red",id:"protocolo-de-red",level:2},{value:"C\xf3mo se Encuentran los Nodos",id:"c\xf3mo-se-encuentran-los-nodos",level:3},{value:"Tipos de Mensajes",id:"tipos-de-mensajes",level:3},{value:"Propagaci\xf3n de Transacciones",id:"propagaci\xf3n-de-transacciones",level:3},{value:"Propagaci\xf3n de Bloques",id:"propagaci\xf3n-de-bloques",level:3},{value:"Tipos de Nodos",id:"tipos-de-nodos",level:2},{value:"Nodo Completo",id:"nodo-completo",level:3},{value:"Nodo Podado",id:"nodo-podado",level:3},{value:"Nodo SPV (Verificaci\xf3n Simplificada de Pagos)",id:"nodo-spv-verificaci\xf3n-simplificada-de-pagos",level:3},{value:"Nodo de Miner\xeda",id:"nodo-de-miner\xeda",level:3},{value:"Nodo de Lightning Network",id:"nodo-de-lightning-network",level:3},{value:"Par\xe1metros de Red",id:"par\xe1metros-de-red",level:2},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"red-p2p",children:"Red P2P"})}),"\n",(0,d.jsx)(n.p,{children:"Bitcoin opera como una red peer-to-peer donde los nodos se comunican directamente entre s\xed \u2014 sin servidor central, sin jerarqu\xeda. Entender esta capa de red es esencial para cualquier desarrollador Bitcoin."}),"\n",(0,d.jsx)(n.h2,{id:"protocolo-de-red",children:"Protocolo de Red"}),"\n",(0,d.jsx)(n.h3,{id:"c\xf3mo-se-encuentran-los-nodos",children:"C\xf3mo se Encuentran los Nodos"}),"\n",(0,d.jsx)(n.p,{children:"Cuando un nodo Bitcoin inicia, necesita descubrir otros nodos para conectarse:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"DNS Seeds"})," \u2014 Direcciones DNS hardcodeadas que devuelven direcciones IP de nodos activos conocidos"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Seed Nodes"})," \u2014 Direcciones IP hardcodeadas como respaldo si los DNS seeds fallan"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Mensajes Addr"})," \u2014 Una vez conectados, los nodos comparten direcciones de otros nodos conocidos"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Peers Manuales"})," \u2014 Los operadores pueden especificar peers manualmente"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"tipos-de-mensajes",children:"Tipos de Mensajes"}),"\n",(0,d.jsx)(n.p,{children:"Los nodos se comunican usando un protocolo binario sobre TCP (puerto por defecto 8333 para mainnet). Tipos de mensajes clave:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Mensaje"}),(0,d.jsx)(n.th,{children:"Prop\xf3sito"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"version"})," / ",(0,d.jsx)(n.code,{children:"verack"})]}),(0,d.jsx)(n.td,{children:"Handshake \u2014 intercambiar informaci\xf3n de versi\xf3n y capacidades"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"inv"})}),(0,d.jsx)(n.td,{children:"Anunciar nuevas transacciones o bloques (inventario)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"getdata"})}),(0,d.jsx)(n.td,{children:"Solicitar los datos completos de elementos anunciados"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tx"})}),(0,d.jsx)(n.td,{children:"Enviar una transacci\xf3n completa"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"block"})}),(0,d.jsx)(n.td,{children:"Enviar un bloque completo"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"headers"})}),(0,d.jsx)(n.td,{children:"Enviar encabezados de bloques (para SPV y sincronizaci\xf3n inicial)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"getblocks"})," / ",(0,d.jsx)(n.code,{children:"getheaders"})]}),(0,d.jsx)(n.td,{children:"Solicitar hashes o encabezados de bloques"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"ping"})," / ",(0,d.jsx)(n.code,{children:"pong"})]}),(0,d.jsx)(n.td,{children:"Mantener la conexi\xf3n activa y medir latencia"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"addr"})," / ",(0,d.jsx)(n.code,{children:"addrv2"})]}),(0,d.jsx)(n.td,{children:"Compartir direcciones de nodos conocidos"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"feefilter"})}),(0,d.jsx)(n.td,{children:"Indicar a los peers la tasa m\xednima de comisi\xf3n para relay"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"propagaci\xf3n-de-transacciones",children:"Propagaci\xf3n de Transacciones"}),"\n",(0,d.jsx)(n.p,{children:"Cuando un usuario transmite una transacci\xf3n:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"La transacci\xf3n se env\xeda a los peers conectados"}),"\n",(0,d.jsx)(n.li,{children:"Cada peer valida la transacci\xf3n independientemente"}),"\n",(0,d.jsxs)(n.li,{children:["Las transacciones v\xe1lidas se agregan al ",(0,d.jsx)(n.strong,{children:"mempool"})," (pool de memoria de transacciones sin confirmar)"]}),"\n",(0,d.jsx)(n.li,{children:"Los peers retransmiten la transacci\xf3n a sus propios peers"}),"\n",(0,d.jsx)(n.li,{children:"La transacci\xf3n se propaga por toda la red en segundos"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"propagaci\xf3n-de-bloques",children:"Propagaci\xf3n de Bloques"}),"\n",(0,d.jsx)(n.p,{children:"Cuando un minero encuentra un bloque v\xe1lido:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["El minero env\xeda un anuncio de ",(0,d.jsx)(n.strong,{children:"bloque compacto"})," a sus peers"]}),"\n",(0,d.jsx)(n.li,{children:"Los peers solicitan las transacciones que no tienen"}),"\n",(0,d.jsx)(n.li,{children:"Cada nodo valida el bloque independientemente (todas las transacciones, proof of work, reglas de consenso)"}),"\n",(0,d.jsx)(n.li,{children:"Los bloques v\xe1lidos se agregan a la blockchain local"}),"\n",(0,d.jsx)(n.li,{children:"El bloque se propaga a toda la red"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Compact Blocks"})," (BIP-152) redujo significativamente el tiempo de propagaci\xf3n de bloques enviando IDs cortos de transacciones en lugar de transacciones completas \u2014 los nodos generalmente ya tienen las transacciones en su mempool."]}),"\n",(0,d.jsx)(n.h2,{id:"tipos-de-nodos",children:"Tipos de Nodos"}),"\n",(0,d.jsx)(n.h3,{id:"nodo-completo",children:"Nodo Completo"}),"\n",(0,d.jsxs)(n.p,{children:["Un ",(0,d.jsx)(n.strong,{children:"nodo completo"})," descarga y valida cada bloque y transacci\xf3n desde el bloque g\xe9nesis. Aplica todas las reglas de consenso de forma independiente."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Almacena:"})," La blockchain completa (600+ GB a 2025)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Valida:"})," Cada transacci\xf3n y bloque"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Sirve:"})," Bloques y transacciones a otros nodos"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Modelo de confianza:"})," Sin confianza \u2014 verifica todo independientemente"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Ejecutar un nodo completo es el est\xe1ndar de oro para la seguridad en Bitcoin. Es la \xfanica forma de estar seguro de que tus transacciones son v\xe1lidas sin confiar en nadie m\xe1s."}),"\n",(0,d.jsx)(n.h3,{id:"nodo-podado",children:"Nodo Podado"}),"\n",(0,d.jsxs)(n.p,{children:["Un ",(0,d.jsx)(n.strong,{children:"nodo podado"})," es un nodo completo que valida todo pero ",(0,d.jsx)(n.strong,{children:"descarta datos de bloques antiguos"})," para ahorrar espacio en disco. Solo mantiene el conjunto UTXO y los bloques recientes."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Almacena:"})," Solo bloques recientes + conjunto UTXO (configurable, m\xednimo ~550 MB)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Valida:"})," Todo (igual que un nodo completo)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"No puede servir:"})," Bloques hist\xf3ricos a otros nodos"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Ideal para:"})," Desarrolladores y usuarios con espacio en disco limitado"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# bitcoin.conf para un nodo podado\nprune=1000  # Mantener solo ~1 GB de datos de bloques\n"})}),"\n",(0,d.jsx)(n.h3,{id:"nodo-spv-verificaci\xf3n-simplificada-de-pagos",children:"Nodo SPV (Verificaci\xf3n Simplificada de Pagos)"}),"\n",(0,d.jsxs)(n.p,{children:["Un ",(0,d.jsx)(n.strong,{children:"nodo SPV"})," solo descarga encabezados de bloques y verifica transacciones usando pruebas de Merkle. Depende de nodos completos para los datos de transacciones."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Almacena:"})," Solo encabezados de bloques (~60 MB)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Valida:"})," Encabezados de bloques y pruebas de Merkle (no transacciones completas)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Modelo de confianza:"})," Asume que la cadena m\xe1s larga con encabezados v\xe1lidos contiene transacciones v\xe1lidas"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Usado por:"})," La mayor\xeda de los wallets m\xf3viles"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Los nodos SPV sacrifican seguridad por eficiencia \u2014 no pueden verificar independientemente todas las reglas de consenso."}),"\n",(0,d.jsx)(n.h3,{id:"nodo-de-miner\xeda",children:"Nodo de Miner\xeda"}),"\n",(0,d.jsxs)(n.p,{children:["Un ",(0,d.jsx)(n.strong,{children:"nodo de miner\xeda"})," es un nodo completo que tambi\xe9n participa en la creaci\xf3n de bloques:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Selecciona transacciones del mempool"}),"\n",(0,d.jsx)(n.li,{children:"Construye bloques candidatos"}),"\n",(0,d.jsx)(n.li,{children:"Realiza computaci\xf3n de proof-of-work"}),"\n",(0,d.jsx)(n.li,{children:"Transmite los bloques descubiertos a la red"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"nodo-de-lightning-network",children:"Nodo de Lightning Network"}),"\n",(0,d.jsxs)(n.p,{children:["Un ",(0,d.jsx)(n.strong,{children:"nodo Lightning"})," se ejecuta junto a un nodo completo de Bitcoin y gestiona canales de pago:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Abre y cierra canales (transacciones on-chain)"}),"\n",(0,d.jsx)(n.li,{children:"Enruta pagos a trav\xe9s de la red Lightning"}),"\n",(0,d.jsx)(n.li,{children:"Mantiene el estado y los saldos de los canales"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Implementaciones populares: LND, CLN (Core Lightning), Eclair, LDK."}),"\n",(0,d.jsx)(n.h2,{id:"par\xe1metros-de-red",children:"Par\xe1metros de Red"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Par\xe1metro"}),(0,d.jsx)(n.th,{children:"Mainnet"}),(0,d.jsx)(n.th,{children:"Testnet"}),(0,d.jsx)(n.th,{children:"Regtest"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Puerto por defecto"}),(0,d.jsx)(n.td,{children:"8333"}),(0,d.jsx)(n.td,{children:"18333"}),(0,d.jsx)(n.td,{children:"18444"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Prefijo de direcci\xf3n"}),(0,d.jsx)(n.td,{children:"1, 3, bc1"}),(0,d.jsx)(n.td,{children:"m, n, tb1"}),(0,d.jsx)(n.td,{children:"bcrt1"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Magic bytes"}),(0,d.jsx)(n.td,{children:"0xD9B4BEF9"}),(0,d.jsx)(n.td,{children:"0x0709110B"}),(0,d.jsx)(n.td,{children:"0xDAB5BFFA"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://developer.bitcoin.org/devguide/p2p_network.html",children:"Bitcoin Developer Guide: P2P Network"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0152.mediawiki",children:"BIP-152 (Compact Blocks)"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://en.bitcoin.it/wiki/Protocol_documentation",children:"Bitcoin Protocol Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>a});var o=s(6540);const d={},i=o.createContext(d);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);