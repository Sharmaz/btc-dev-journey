"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[4530],{5842(e,i,n){n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tracks/application-developer/advanced-protocols/index","title":"Protocolos Avanzados","description":"Multisig, timelocks, atomic swaps y otros patrones avanzados de transacciones Bitcoin","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/tracks/application-developer/06-advanced-protocols/index.md","sourceDirName":"tracks/application-developer/06-advanced-protocols","slug":"/tracks/application-developer/advanced-protocols/","permalink":"/es/docs/tracks/application-developer/advanced-protocols/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Protocolos Avanzados","description":"Multisig, timelocks, atomic swaps y otros patrones avanzados de transacciones Bitcoin"},"sidebar":"guideSidebar","previous":{"title":"Web3 en Bitcoin","permalink":"/es/docs/tracks/application-developer/web3-bitcoin/"},"next":{"title":"Protocolos en Bitcoin","permalink":"/es/docs/tracks/application-developer/protocols-on-bitcoin/"}}');var o=n(4848),a=n(8453);const r={sidebar_position:6,title:"Protocolos Avanzados",description:"Multisig, timelocks, atomic swaps y otros patrones avanzados de transacciones Bitcoin"},c="Protocolos Avanzados",t={},l=[{value:"Multisig",id:"multisig",level:2},{value:"Multisig M-de-N",id:"multisig-m-de-n",level:3},{value:"Enfoques de Implementaci\xf3n",id:"enfoques-de-implementaci\xf3n",level:3},{value:"Flujo de Trabajo Multisig con PSBT",id:"flujo-de-trabajo-multisig-con-psbt",level:3},{value:"Timelocks",id:"timelocks",level:2},{value:"Timelocks Absolutos (CLTV)",id:"timelocks-absolutos-cltv",level:3},{value:"Timelocks Relativos (CSV)",id:"timelocks-relativos-csv",level:3},{value:"Atomic Swaps",id:"atomic-swaps",level:2},{value:"C\xf3mo Funcionan los HTLCs",id:"c\xf3mo-funcionan-los-htlcs",level:3},{value:"Submarine Swaps",id:"submarine-swaps",level:3},{value:"Covenants",id:"covenants",level:2},{value:"CoinJoin",id:"coinjoin",level:2},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"protocolos-avanzados",children:"Protocolos Avanzados"})}),"\n",(0,o.jsx)(i.p,{children:"Bitcoin Script permite patrones de transacci\xf3n poderosos m\xe1s all\xe1 de pagos simples. Estos bloques de construcci\xf3n son la base de aplicaciones m\xe1s complejas como Lightning, exchanges y custodia colaborativa."}),"\n",(0,o.jsx)(i.h2,{id:"multisig",children:"Multisig"}),"\n",(0,o.jsx)(i.p,{children:"Multisig (multi-firma) requiere m\xfaltiples claves privadas para autorizar una transacci\xf3n. Es fundamental para custodia colaborativa y wallets organizacionales."}),"\n",(0,o.jsx)(i.h3,{id:"multisig-m-de-n",children:"Multisig M-de-N"}),"\n",(0,o.jsx)(i.p,{children:"Un esquema M-de-N requiere M firmas de N claves totales:"}),"\n",(0,o.jsxs)(i.table,{children:[(0,o.jsx)(i.thead,{children:(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.th,{children:"Configuraci\xf3n"}),(0,o.jsx)(i.th,{children:"Caso de Uso"})]})}),(0,o.jsxs)(i.tbody,{children:[(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"2-de-3"})}),(0,o.jsx)(i.td,{children:"Seguridad personal (t\xfa tienes 2 claves, servicio de respaldo tiene 1)"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"3-de-5"})}),(0,o.jsx)(i.td,{children:"Tesorer\xeda corporativa (requiere aprobaci\xf3n mayoritaria)"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"2-de-2"})}),(0,o.jsx)(i.td,{children:"Canales de pago Lightning"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"1-de-2"})}),(0,o.jsx)(i.td,{children:"Acceso compartido (cualquier parte puede gastar)"})]})]})]}),"\n",(0,o.jsx)(i.h3,{id:"enfoques-de-implementaci\xf3n",children:"Enfoques de Implementaci\xf3n"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"P2SH multisig"})," \u2014 Legacy, limitado a 15 claves"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"P2WSH multisig"})," \u2014 SegWit, m\xe1s eficiente"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"MuSig2 (Taproot)"})," \u2014 Agregaci\xf3n de claves, se ve como single-sig on-chain (mejor privacidad y menores comisiones)"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"flujo-de-trabajo-multisig-con-psbt",children:"Flujo de Trabajo Multisig con PSBT"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"1. Creator construye transacci\xf3n sin firmar (PSBT)\n2. Enviar PSBT a Firmante A \u2192 firma con su clave\n3. Enviar PSBT parcialmente firmado a Firmante B \u2192 firma con su clave\n4. Combiner fusiona firmas\n5. Finalizer completa la transacci\xf3n\n6. Transmitir\n"})}),"\n",(0,o.jsx)(i.h2,{id:"timelocks",children:"Timelocks"}),"\n",(0,o.jsx)(i.p,{children:"Los timelocks restringen cu\xe1ndo una transacci\xf3n puede ser confirmada:"}),"\n",(0,o.jsx)(i.h3,{id:"timelocks-absolutos-cltv",children:"Timelocks Absolutos (CLTV)"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.code,{children:"OP_CHECKLOCKTIMEVERIFY"})," previene el gasto antes de una altura de bloque o timestamp espec\xedfico:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"# Can't spend before block 800000\nOP_CHECKLOCKTIMEVERIFY OP_DROP <pubkey> OP_CHECKSIG\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Casos de uso:"})," Liberaciones de fondos fiduciarios, pagos programados, dead man's switches"]}),"\n",(0,o.jsx)(i.h3,{id:"timelocks-relativos-csv",children:"Timelocks Relativos (CSV)"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.code,{children:"OP_CHECKSEQUENCEVERIFY"})," previene el gasto hasta que un cierto n\xfamero de bloques haya pasado desde que el UTXO fue creado:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"# Can't spend until 144 blocks (~1 day) after creation\nOP_CHECKSEQUENCEVERIFY OP_DROP <pubkey> OP_CHECKSIG\n"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Casos de uso:"})," Transacciones de compromiso Lightning, rutas de revocaci\xf3n, per\xedodos de enfriamiento"]}),"\n",(0,o.jsx)(i.h2,{id:"atomic-swaps",children:"Atomic Swaps"}),"\n",(0,o.jsx)(i.p,{children:"Los atomic swaps permiten intercambio sin confianza de criptomonedas entre diferentes blockchains usando Hash Time-Locked Contracts (HTLCs)."}),"\n",(0,o.jsx)(i.h3,{id:"c\xf3mo-funcionan-los-htlcs",children:"C\xf3mo Funcionan los HTLCs"}),"\n",(0,o.jsx)(i.mermaid,{value:"sequenceDiagram\n    Alice->>Alice: Creates secret S, computes H(S)\n    Alice->>Bitcoin: Lock BTC with HTLC (hash=H(S), timeout=24h)\n    Bob->>Litecoin: Lock LTC with HTLC (hash=H(S), timeout=12h)\n    Alice->>Litecoin: Claims LTC (reveals S)\n    Bob->>Bitcoin: Claims BTC (uses revealed S)"}),"\n",(0,o.jsx)(i.p,{children:"Si cualquier parte desaparece, los timelocks aseguran que los fondos sean devueltos."}),"\n",(0,o.jsx)(i.h3,{id:"submarine-swaps",children:"Submarine Swaps"}),"\n",(0,o.jsx)(i.p,{children:"Los submarine swaps intercambian Bitcoin on-chain por pagos Lightning (o viceversa):"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"On-chain \u2192 Lightning:"})," Pagar un HTLC on-chain, recibir un pago Lightning"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.strong,{children:"Lightning \u2192 On-chain:"})," Pagar una factura Lightning, recibir un UTXO on-chain"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Servicios como ",(0,o.jsx)(i.a,{href:"https://boltz.exchange/",children:"Boltz"})," facilitan submarine swaps."]}),"\n",(0,o.jsx)(i.h2,{id:"covenants",children:"Covenants"}),"\n",(0,o.jsx)(i.p,{children:"Los covenants restringen c\xf3mo un UTXO puede gastarse (no solo qui\xe9n puede gastarlo). Son un \xe1rea activa de investigaci\xf3n:"}),"\n",(0,o.jsxs)(i.table,{children:[(0,o.jsx)(i.thead,{children:(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.th,{children:"Propuesta"}),(0,o.jsx)(i.th,{children:"Mecanismo"})]})}),(0,o.jsxs)(i.tbody,{children:[(0,o.jsxs)(i.tr,{children:[(0,o.jsxs)(i.td,{children:[(0,o.jsx)(i.strong,{children:"OP_CTV"})," (BIP-119)"]}),(0,o.jsx)(i.td,{children:"Comprometerse con la transacci\xf3n exacta que gasta la salida"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"OP_VAULT"})}),(0,o.jsx)(i.td,{children:"Construcci\xf3n de vault de prop\xf3sito espec\xedfico"})]}),(0,o.jsxs)(i.tr,{children:[(0,o.jsx)(i.td,{children:(0,o.jsx)(i.strong,{children:"OP_CAT"})}),(0,o.jsx)(i.td,{children:"Habilitar l\xf3gica de covenant arbitraria v\xeda composici\xf3n de script"})]})]})]}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"Casos de uso:"})," Vaults (retiros con retraso y recuperaci\xf3n), control de congesti\xf3n, payment pools"]}),"\n",(0,o.jsx)(i.h2,{id:"coinjoin",children:"CoinJoin"}),"\n",(0,o.jsx)(i.p,{children:"CoinJoin es una t\xe9cnica de privacidad donde m\xfaltiples usuarios combinan sus transacciones:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsx)(i.li,{children:"M\xfaltiples usuarios proporcionan inputs"}),"\n",(0,o.jsx)(i.li,{children:"Un coordinador construye una transacci\xf3n con outputs uniformes"}),"\n",(0,o.jsx)(i.li,{children:"Cada usuario firma sus inputs"}),"\n",(0,o.jsx)(i.li,{children:"La transacci\xf3n combinada se transmite"}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Herramientas: ",(0,o.jsx)(i.a,{href:"https://github.com/JoinMarket-Org/joinmarket-clientserver",children:"Joinmarket"}),", ",(0,o.jsx)(i.a,{href:"https://wasabiwallet.io/",children:"Wasabi Wallet"})]}),"\n",(0,o.jsx)(i.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://en.bitcoin.it/wiki/Script",children:"Bitcoin Script Wiki"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki",children:"BIP-65: CLTV"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0068.mediawiki",children:"BIP-68/112: CSV"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://en.bitcoin.it/wiki/Atomic_swap",children:"Atomic Swap Explanation"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki",children:"BIP-119: OP_CTV"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,i,n){n.d(i,{R:()=>r,x:()=>c});var s=n(6540);const o={},a=s.createContext(o);function r(e){const i=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:i},e.children)}}}]);