"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[5216],{4013(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tracks/protocol-developer/testing/index","title":"Testing","description":"Metodolog\xedas de testing en Bitcoin Core - tests funcionales, unitarios y fuzz testing","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/tracks/protocol-developer/03-testing/index.md","sourceDirName":"tracks/protocol-developer/03-testing","slug":"/tracks/protocol-developer/testing/","permalink":"/es/docs/tracks/protocol-developer/testing/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Testing","description":"Metodolog\xedas de testing en Bitcoin Core - tests funcionales, unitarios y fuzz testing"},"sidebar":"guideSidebar","previous":{"title":"Lenguajes y Herramientas","permalink":"/es/docs/tracks/protocol-developer/languages-tools/"},"next":{"title":"Bitcoin Improvement Proposals (BIPs)","permalink":"/es/docs/tracks/protocol-developer/bips/"}}');var t=s(4848),r=s(8453);const o={sidebar_position:3,title:"Testing",description:"Metodolog\xedas de testing en Bitcoin Core - tests funcionales, unitarios y fuzz testing"},a="Testing",c={},l=[{value:"Capas de Testing",id:"capas-de-testing",level:2},{value:"Tests Unitarios (C++)",id:"tests-unitarios-c",level:3},{value:"Tests Funcionales (Python)",id:"tests-funcionales-python",level:3},{value:"Fuzz Testing",id:"fuzz-testing",level:3},{value:"Linting",id:"linting",level:3},{value:"Infraestructura de CI",id:"infraestructura-de-ci",level:2},{value:"Sanitizers",id:"sanitizers",level:3},{value:"Escribir Buenos Tests",id:"escribir-buenos-tests",level:2},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"testing",children:"Testing"})}),"\n",(0,t.jsx)(n.p,{children:"El testing no es opcional en Bitcoin Core \u2014 es un requisito de primera clase. Cada pull request debe incluir tests apropiados. El proyecto tiene m\xfaltiples capas de testing, cada una detectando diferentes tipos de bugs."}),"\n",(0,t.jsx)(n.h2,{id:"capas-de-testing",children:"Capas de Testing"}),"\n",(0,t.jsx)(n.h3,{id:"tests-unitarios-c",children:"Tests Unitarios (C++)"}),"\n",(0,t.jsxs)(n.p,{children:["Ubicados en ",(0,t.jsx)(n.code,{children:"src/test/"}),", estos prueban funciones y clases individuales de forma aislada:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Compilar y ejecutar tests unitarios\ncmake --build build\nctest --test-dir build\n\n# Ejecutar suite de tests espec\xedfica\n./build/src/test/test_bitcoin --run_test=script_tests\n\n# Listar suites de tests disponibles\n./build/src/test/test_bitcoin --list_content\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Los tests unitarios usan el framework ",(0,t.jsx)(n.strong,{children:"Boost.Test"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:"BOOST_AUTO_TEST_SUITE(example_tests)\n\nBOOST_AUTO_TEST_CASE(basic_check)\n{\n    CTransaction tx;\n    BOOST_CHECK(tx.vin.empty());\n    BOOST_CHECK(tx.vout.empty());\n}\n\nBOOST_AUTO_TEST_SUITE_END()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"tests-funcionales-python",children:"Tests Funcionales (Python)"}),"\n",(0,t.jsxs)(n.p,{children:["Ubicados en ",(0,t.jsx)(n.code,{children:"test/functional/"}),", estos levantan nodos reales de Bitcoin Core y prueban el comportamiento de extremo a extremo:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ejecutar toda la suite de tests funcionales\ntest/functional/test_runner.py\n\n# Ejecutar test espec\xedfico con logging\ntest/functional/feature_block.py --loglevel=debug\n\n# Ejecutar tests en paralelo\ntest/functional/test_runner.py -j8\n"})}),"\n",(0,t.jsx)(n.p,{children:"Los tests funcionales son la forma principal de probar cambios a nivel de protocolo. Simulan condiciones reales de red con m\xfaltiples nodos."}),"\n",(0,t.jsx)(n.h3,{id:"fuzz-testing",children:"Fuzz Testing"}),"\n",(0,t.jsx)(n.p,{children:"El fuzz testing alimenta datos aleatorios o semi-aleatorios a funciones de parsing para encontrar crashes, cuelgues y comportamiento indefinido:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Compilar con soporte de fuzzing\ncmake -B build -DSANITIZERS=fuzzer\ncmake --build build\n\n# Ejecutar un objetivo de fuzz\n./build/src/test/fuzz/deserialize_block\n\n# Ejecutar con un corpus\n./build/src/test/fuzz/deserialize_block corpus/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Bitcoin Core tiene ",(0,t.jsx)(n.strong,{children:"cientos de objetivos de fuzz"})," cubriendo deserializaci\xf3n, parsing de scripts, manejo de mensajes de red y m\xe1s. El proyecto ",(0,t.jsx)(n.a,{href:"https://google.github.io/oss-fuzz/",children:"OSS-Fuzz"})," ejecuta fuzz testing continuo sobre Bitcoin Core."]}),"\n",(0,t.jsx)(n.h3,{id:"linting",children:"Linting"}),"\n",(0,t.jsx)(n.p,{children:"An\xe1lisis est\xe1tico y verificaciones de estilo se ejecutan en CI:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ejecutar todos los linters\ntest/lint/run-lint.sh\n\n# Verificaciones espec\xedficas\ntest/lint/lint-circular-dependencies.py\ntest/lint/lint-includes.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"infraestructura-de-ci",children:"Infraestructura de CI"}),"\n",(0,t.jsx)(n.p,{children:"Cada pull request pasa por CI automatizado:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Sistema"}),(0,t.jsx)(n.th,{children:"Qu\xe9 Verifica"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"GitHub Actions"})}),(0,t.jsx)(n.td,{children:"Compilaci\xf3n en m\xfaltiples plataformas, ejecuci\xf3n de tests"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Cirrus CI"})}),(0,t.jsx)(n.td,{children:"Compilaciones en macOS, ejecuci\xf3n de sanitizers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"OSS-Fuzz"})}),(0,t.jsx)(n.td,{children:"Fuzz testing continuo"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Guix builds"})}),(0,t.jsx)(n.td,{children:"Compilaciones binarias reproducibles"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"sanitizers",children:"Sanitizers"}),"\n",(0,t.jsx)(n.p,{children:"El CI de Bitcoin Core usa sanitizers de LLVM para detectar bugs de memoria e hilos:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ASan"})," (AddressSanitizer) \u2014 Desbordamientos de buffer, uso despu\xe9s de liberar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UBSan"})," (UndefinedBehaviorSanitizer) \u2014 Desbordamiento de enteros, desreferencia de puntero nulo"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"TSan"})," (ThreadSanitizer) \u2014 Condiciones de carrera de datos"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MSan"})," (MemorySanitizer) \u2014 Lecturas de memoria no inicializada"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Compilar con sanitizers\ncmake -B build -DSANITIZERS="address;undefined"\ncmake --build build\n'})}),"\n",(0,t.jsx)(n.h2,{id:"escribir-buenos-tests",children:"Escribir Buenos Tests"}),"\n",(0,t.jsx)(n.p,{children:"Al contribuir a Bitcoin Core, sigue estas gu\xedas de testing:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prueba el comportamiento, no la implementaci\xf3n"})," \u2014 Los tests deben verificar qu\xe9 hace el c\xf3digo, no c\xf3mo lo hace"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prueba casos l\xedmite"})," \u2014 Entradas vac\xedas, valores m\xe1ximos, datos malformados"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prueba modos de falla"})," \u2014 Aseg\xfarate de que las entradas inv\xe1lidas se rechacen correctamente"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No pruebes funcionalidad del framework"})," \u2014 Conf\xeda en Boost.Test y el framework de Python"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Mant\xe9n los tests determin\xedsticos"})," \u2014 Evita dependencias de tiempo y fallos aleatorios"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/tree/master/test",children:"Documentaci\xf3n de Tests de Bitcoin Core"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/test/functional/README.md",children:"README de Tests Funcionales"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md",children:"Gu\xeda de Fuzz Testing"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);