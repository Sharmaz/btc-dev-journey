"use strict";(self.webpackChunkbtc_dev_journey=self.webpackChunkbtc_dev_journey||[]).push([[6790],{95:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/bitcoin_core_sync-90cb9f2e22341e11b378b11d28ece2f1.png"},6465:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"environment-setup/macos","title":"MacOS","description":"Bitcoin Core","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/environment-setup/macos.md","sourceDirName":"environment-setup","slug":"/environment-setup/macos","permalink":"/es/docs/environment-setup/macos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"guideSidebar","previous":{"title":"Ubuntu","permalink":"/es/docs/environment-setup/ubuntu"},"next":{"title":"Desinstalaci\xf3n","permalink":"/es/docs/environment-setup/uninstall-setup"}}');var s=i(4848),o=i(8453);const c={sidebar_position:2},r="MacOS",l={},d=[{value:"Bitcoin Core",id:"bitcoin-core",level:2},{value:"Dependencias",id:"dependencias",level:3},{value:"Instalaci\xf3n de Bitcoin Core",id:"instalaci\xf3n-de-bitcoin-core",level:3},{value:"Ejecuci\xf3n de Bitcoin para Desarrollo",id:"ejecuci\xf3n-de-bitcoin-para-desarrollo",level:3},{value:"Instalaci\xf3n de Lightning",id:"instalaci\xf3n-de-lightning",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"macos",children:"MacOS"})}),"\n",(0,s.jsx)(n.h2,{id:"bitcoin-core",children:"Bitcoin Core"}),"\n",(0,s.jsx)(n.h3,{id:"dependencias",children:"Dependencias"}),"\n",(0,s.jsxs)(n.p,{children:["Instalar dependencias ",(0,s.jsx)(n.code,{children:"Python 3.12.3"}),", ",(0,s.jsx)(n.code,{children:"Homebrew"})," y ",(0,s.jsx)(n.code,{children:"Xcode"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Las versiones superiores de Python no me funcionaron. Me causaron errores mas adelante con Lightning Network."})}),"\n",(0,s.jsx)(n.p,{children:"Otras dependencias:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'brew install autoconf automake libtool gnu-sed gettext libsodium protobuf\nexport PATH="/usr/local/opt:$PATH"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Dependiencias de Python:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install --upgrade pip\npip install poetry\npip install --user pyln-client websockets\n"})}),"\n",(0,s.jsx)(n.p,{children:"Si no tenemos SQLite hay que instalarlo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'brew install sqlite\nexport LDFLAGS="-L/usr/local/opt/sqlite/lib"\nexport CPPFLAGS="-I/usr/local/opt/sqlite/include"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Para las Macs con ",(0,s.jsx)(n.code,{children:"Apple Silicon"})," hay que asegurarse de que los paths de las librer\xedas son correctos trat\xe1ndose de Homebrew:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export CPATH=/opt/homebrew/include\nexport LIBRARY_PATH=/opt/homebrew/lib\n"})}),"\n",(0,s.jsx)(n.h3,{id:"instalaci\xf3n-de-bitcoin-core",children:"Instalaci\xf3n de Bitcoin Core"}),"\n",(0,s.jsxs)(n.p,{children:["La manera m\xe1s sencilla es descargarnos Bitcoin Core de ",(0,s.jsx)(n.a,{href:"https://bitcoincore.org/en/download/",children:"bitcoincore.org"}),", lo descomprimimos y lo arrastramos a nuestra carpeta de aplicaciones."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Tambi\xe9n existe la opci\xf3n de compilar Bitcoin Core desde el c\xf3digo fuente."})}),"\n",(0,s.jsxs)(n.p,{children:["Para poder correrlo, ademas de abrirlo desde aplicaciones hay a que otorgarle permisos en ",(0,s.jsx)(n.code,{children:"System Settings"})," > ",(0,s.jsx)(n.code,{children:"Privacy & Security"}),". Nos movemos hasta abajo y hay que darle al bot\xf3n ",(0,s.jsx)(n.code,{children:"Open Anyway"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image",src:i(9120).A+"",width:"1394",height:"342"})}),"\n",(0,s.jsxs)(n.p,{children:["En la configuraci\xf3n inicial elegimos el directorio por defecto junto con la opcion de ",(0,s.jsx)(n.code,{children:"1 GB"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image",src:i(9767).A+"",width:"1254",height:"850"})}),"\n",(0,s.jsx)(n.p,{children:"Bitcoin Core va syncronizar y a descargar toda la blockchain, y eso va a tardar muchas horas dependiendo de tu equipo y tu conexi\xf3n a internet."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image",src:i(95).A+"",width:"1568",height:"1018"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Sincronizar el todo el blockchain podria tardar muchas horas o incluso d\xedas."})}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsxs)(n.p,{children:["En esta gu\xeda no vamos a sincronizar todo el blockchain, vamos a usar un ",(0,s.jsx)(n.code,{children:"Prune Node"}),", o nodo podado y vamos a utilizar la red ",(0,s.jsx)(n.code,{children:"regtest"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["Abrimos la app de Bitcoin Core y nos vamos a las preferencias de la aplicaci\xf3n. En la presta\xf1a de ",(0,s.jsx)(n.code,{children:"main"})," vamos a abrir el archivo de configuraci\xf3n de bitcoin core en el boton que dice ",(0,s.jsx)(n.code,{children:"Open Configuration File"})," y agregamos lo siguiente:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="bitcoin.conf"',children:"prune=550\nregtest=1\n\n[regtest]\nrcpport=18443\nrpcuser=foo\nrpcpassword=bar\n"})}),"\n",(0,s.jsx)(n.p,{children:"Reiniciamos la aplicaci\xf3n de Bitcoin Core y esperamos a que se sincronice."}),"\n",(0,s.jsx)(n.p,{children:"Esto va a reducir significativamente el tiempo de sincronizaci\xf3n asi como el espacio en disco que necesitamos."}),"\n",(0,s.jsx)(n.p,{children:"Despues de sincronizar la blockchain, cerramos la aplicaci\xf3n gr\xe1fica de Bitcoin Core, necesitamos correr bitcoin core en la terminal, para ello tenemos que instalarlo desde homebrew:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"brew install bitcoin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Hombrew nos va a instalar ",(0,s.jsx)(n.code,{children:"bitcoind"})," y ",(0,s.jsx)(n.code,{children:"bitcoin-cli"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"ejecuci\xf3n-de-bitcoin-para-desarrollo",children:"Ejecuci\xf3n de Bitcoin para Desarrollo"}),"\n",(0,s.jsx)(n.p,{children:"Vamos a abrir dos ventanas o pesta\xf1as de terminal:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["En la primera terminal ejecutamos ",(0,s.jsx)(n.code,{children:"bitcoind"})," el cual va a correr el nodo de bitcoin y va sincronizar el blockchain (si no sincronizamos antes)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bitcoind\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["En la segunda terminal ejecutamos ",(0,s.jsx)(n.code,{children:"bitcoin-cli"})," donde nos va a mostrar la info del nodo."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bitcoin-cli getblockchaininfo\n"})}),"\n",(0,s.jsx)(n.p,{children:"Si todo sale bien deberiamos ver algo como esto:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JSON",metastring:'title="getblockchaininfo salida"',children:'{\n  "chain": "main",\n  "blocks": 1,\n  "headers": 1,\n  "bestblockhash": "0000000000000000000000000000000000000000000000000000000000000000",\n  "difficulty": 1,\n  "mediantime": 0,\n  "verificationprogress": 1,\n  "initialblockdownload": true,\n  "chainwork": "0000000000000000000000000000000000000000000000000000000000000000",\n  "size_on_disk": 0,\n  "pruned": true,\n  "pruneheight": 0,\n  "automatic_pruning": true,\n  "prune_target_size": 0,\n  "softforks": [],\n  "warnings": ""\n}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Toda petici\xf3n realizada con ",(0,s.jsx)(n.code,{children:"bitcoin-cli"})," nos responder\xe1 en formato JSON."]})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Si en tu caso la aplicaci\xf3n que quieres desarrollar es solamente para Bitcoin, sin tocar la Lightning Network, puedes saltarte el resto de la gu\xeda. Y tus siguientes pasos seran terminar de sincronizar la blockchain con ",(0,s.jsx)(n.code,{children:"bitcoind"})," y luego seguir usando ",(0,s.jsx)(n.code,{children:"bitcoin-cli"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"instalaci\xf3n-de-lightning",children:"Instalaci\xf3n de Lightning"}),"\n",(0,s.jsx)(n.p,{children:"Vamos a descargar el repositorio:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/ElementsProject/lightning.git\ncd lightning\n"})}),"\n",(0,s.jsx)(n.p,{children:"Compilamos e instalamos lightning:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"poetry install\n./configure\npoetry run make\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Necesitamos correr ",(0,s.jsx)(n.code,{children:"bitcoind"}),", ",(0,s.jsx)(n.code,{children:"lightningd"})," y ",(0,s.jsx)(n.code,{children:"lightning-cli"})," en segundo plano con la flag ",(0,s.jsx)(n.code,{children:"--regtest"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bitcoind &\n./lightningd/lightningd --regtest &\n./cli/lightning-cli --regtest help\n"})}),"\n",(0,s.jsx)(n.p,{children:"Corremos la testnet de lighning (en realidad regtest, pero eso lo explicar\xe9 en otra gu\xeda):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:". contrib/startup_regtest.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:["El comando anterior es un script que va a correr ",(0,s.jsx)(n.code,{children:"bitcoind"}),", ",(0,s.jsx)(n.code,{children:"bitcion-cli"}),", ",(0,s.jsx)(n.code,{children:"lightningd"})," y ",(0,s.jsx)(n.code,{children:"lightning-cli"}),". Y nos va a dar la siguiente salida con unos comandos b\xe1sicos."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=". contrib/startup_regtest.sh salida"',children:"Useful commands:\n  start_ln 3: start three nodes, l1, l2, l3\n  connect 1 2: connect l1 and l2\n  fund_nodes: connect all nodes with channels, in a row\n  stop_ln: shutdown\n  destroy_ln: remove ln directories\n"})}),"\n",(0,s.jsxs)(n.p,{children:["El comando ",(0,s.jsx)(n.code,{children:"start_ln"})," crear\xe1 un par de nodos en la red lightning (l1 y l2)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"start_ln\n"})}),"\n",(0,s.jsx)(n.p,{children:"Tambien nos dar\xe1 una lista de comandos para interactuar con cada nodo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="start_ln salida"',children:'Bitcoin Core starting\nawaiting bitcoind...\nLoading "default" bitcoind wallet.\n[1] 10459\n[2] 10463\nCommands:\n        l1-cli, l1-log,\n        l2-cli, l2-log,\n        bt-cli, stop_ln, fund_nodes\ntimed out parsing log /tmp/l1/log\n'})}),"\n",(0,s.jsx)(n.p,{children:"Vamos a obtener la informaci\xf3n de uno de los nodos (l1)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"l1-cli getinfo\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Toda petici\xf3n realizada en lightning nos responder\xe1 en formato JSON."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JSON",metastring:'title="getinfo salida"',children:'{\n   "id": "02d44e9a844e84ab76d412601c8e648ce039b8266874ddfe5b854fb6723096ea06",\n   "alias": "SLICKERROUTE-v24.11-91-g9e29bde",\n   "color": "02d44e",\n   "num_peers": 0,\n   "num_pending_channels": 0,\n   "num_active_channels": 0,\n   "num_inactive_channels": 0,\n   "address": [],\n   "binding": [\n      {\n         "type": "ipv4",\n         "address": "127.0.0.1",\n         "port": 7171\n      }\n   ],\n   "version": "v24.11-91-g9e29bde",\n   "blockheight": 109,\n   "network": "regtest",\n   "fees_collected_msat": 0,\n   "lightning-dir": "/tmp/l1/regtest",\n   "our_features": {\n      "init": "8008a0882a8a59a1",\n      "node": "8088a0882a8a59a1",\n      "channel": "",\n      "invoice": "02000002024100"\n   }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Ahora vamos a agregarle fondos (unos cuantos satoshis) a los nodos:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"fund_nodes\n"})}),"\n",(0,s.jsx)(n.p,{children:"Genial!!"}),"\n",(0,s.jsxs)(n.p,{children:["Obtenemos la informaci\xf3n de los fondos del nodo ",(0,s.jsx)(n.code,{children:"l1"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"l1-cli listfunds\n"})}),"\n",(0,s.jsxs)(n.p,{children:["La propiedad ",(0,s.jsx)(n.code,{children:"amount_msat"})," es el monto en satoshis."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JSON",metastring:'title="listfunds salida"',children:'{\n   "outputs": [\n      {\n         "txid": "3383b42043c96d072f1a22f11ea1e4039bb93176f13d397178a6eb13cb7113e2",\n         "output": 1,\n         "amount_msat": 98999834000,\n         "scriptpubkey": "51200e98fba542bc6fda8cb83ae930cebd6f6957f3cb5d2eb49e47a6d0f612473efa",\n         "address": "bcrt1pp6v0hf2zh3ha4r9c8t5npn4ada540u7tt5htf8j85mg0vyj88maq9zy237",\n         "status": "confirmed",\n         "blockheight": 111,\n         "reserved": false\n      }\n   ],\n   "channels": [\n      {\n         "peer_id": "02fed4dea6a6bc7dcc8d7bb4c88aa452fc4cd3878949851b4c0c23e71eebfc751f",\n         "connected": true,\n         "state": "CHANNELD_NORMAL",\n         "channel_id": "8274abbaeb547055d57f07337965eadea778c7e0344dd6d1b55257746cd85288",\n         "short_channel_id": "111x1x0",\n         "our_amount_msat": 1000000000,\n         "amount_msat": 1100000000,\n         "funding_txid": "3383b42043c96d072f1a22f11ea1e4039bb93176f13d397178a6eb13cb7113e2",\n         "funding_output": 0\n      }\n   ]\n}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"\xa1Felicidades!! Ahora podemos construir aplicaciones sobre Bitcoin y Lightning Network.\n...bueno, mas o menos. Por lo menos podemos comenzar a experimentar con ello."})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},9120:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/bitcoin_core_macos_settings_open-c82d7659e648391858e46e7525148456.png"},9767:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/bitcoin_core_setup-91e8b80ed97cf053337f01bc9110c5d4.png"}}]);