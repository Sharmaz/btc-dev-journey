"use strict";(self.webpackChunkbtc_dev_journey=self.webpackChunkbtc_dev_journey||[]).push([[4452],{4215:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"environment-setup/ubuntu","title":"Ubuntu","description":"Bitcoin Core","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/environment-setup/ubuntu.md","sourceDirName":"environment-setup","slug":"/environment-setup/ubuntu","permalink":"/btc-dev-journey/es/docs/environment-setup/ubuntu","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"guideSidebar","previous":{"title":"Environment setup","permalink":"/btc-dev-journey/es/docs/category/environment-setup"},"next":{"title":"MacOS","permalink":"/btc-dev-journey/es/docs/environment-setup/macos"}}');var s=i(4848),o=i(8453);const c={sidebar_position:1},r="Ubuntu",t={},d=[{value:"Bitcoin Core",id:"bitcoin-core",level:2},{value:"Dependencias",id:"dependencias",level:3},{value:"Instalaci\xf3n de Bitcoin Core",id:"instalaci\xf3n-de-bitcoin-core",level:3},{value:"Ejecuci\xf3n de Bitcoin para Desarrollo",id:"ejecuci\xf3n-de-bitcoin-para-desarrollo",level:3},{value:"Instalaci\xf3n de Lightning",id:"instalaci\xf3n-de-lightning",level:2}];function l(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"ubuntu",children:"Ubuntu"})}),"\n",(0,s.jsx)(e.h2,{id:"bitcoin-core",children:"Bitcoin Core"}),"\n",(0,s.jsx)(e.h3,{id:"dependencias",children:"Dependencias"}),"\n",(0,s.jsxs)(e.p,{children:["Vamos a instalar ",(0,s.jsx)(e.code,{children:"Python 3.12.3"}),"."]}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"Las versiones superiores no me funcionaron. Me causaron errores mas adelante con Lightning Network."})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title="Dependencias de python"',children:"sudo apt-get update\nsudo apt-get install -y \\\n  jq autoconf automake build-essential git libtool libsqlite3-dev libffi-dev \\\n  python3 python3-pip net-tools zlib1g-dev libsodium-dev gettext\npip3 install --upgrade pip\npip3 install --user poetry\n"})}),"\n",(0,s.jsx)(e.h3,{id:"instalaci\xf3n-de-bitcoin-core",children:"Instalaci\xf3n de Bitcoin Core"}),"\n",(0,s.jsxs)(e.p,{children:["Para instalar ",(0,s.jsx)(e.code,{children:"Bitcoin Core"})," lo m\xe1s sencillo es usando snap."]}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"Tambien existe la opci\xf3n de compilar Bitcoin Core desde el c\xf3digo fuente."})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title="Bitcoin core"',children:"sudo apt-get install snapd\nsudo snap install bitcoin-core\n# Se agrega un link simb\xf3lico debido a que snap hace cosas raras cuando maneja binarios.\nsudo ln -s /snap/bitcoin-core/current/bin/bitcoin{d,-cli} /usr/local/bin/\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["En caso de que directamente vayas a desarrollar aplicaciones para Ligthning Network, te recomiendo saltarte el paso que sigue e ir directamente a ",(0,s.jsx)(e.a,{href:"#instalaci%C3%B3n-de-lightning",children:"Instalaci\xf3n de Lightning"}),"."]})}),"\n",(0,s.jsx)(e.h3,{id:"ejecuci\xf3n-de-bitcoin-para-desarrollo",children:"Ejecuci\xf3n de Bitcoin para Desarrollo"}),"\n",(0,s.jsx)(e.p,{children:"Vamos a abrir dos ventanas o pesta\xf1as de terminal:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["En la primera terminal ejecutamos ",(0,s.jsx)(e.code,{children:"bitcoind"})," el cual va a correr el nodo de bitcoin y va sincronizar el blockchain que son mas de medio terabyte."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"bitcoind\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["En la segunda terminal ejecutamos ",(0,s.jsx)(e.code,{children:"bitcoin-cli"})," donde nos va a mostrar la info del nodo."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"bitcoin-cli getblockchaininfo\n"})}),"\n",(0,s.jsx)(e.p,{children:"Si todo sale bien deberiamos ver algo como esto:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-JSON",metastring:'title="getblockchaininfo salida"',children:'{\n  "chain": "main",\n  "blocks": 1,\n  "headers": 1,\n  "bestblockhash": "0000000000000000000000000000000000000000000000000000000000000000",\n  "difficulty": 1,\n  "mediantime": 0,\n  "verificationprogress": 1,\n  "initialblockdownload": true,\n  "chainwork": "0000000000000000000000000000000000000000000000000000000000000000",\n  "size_on_disk": 0,\n  "pruned": true,\n  "pruneheight": 0,\n  "automatic_pruning": true,\n  "prune_target_size": 0,\n  "softforks": [],\n  "warnings": ""\n}\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:["Toda petici\xf3n realizada con ",(0,s.jsx)(e.code,{children:"bitcoin-cli"})," nos responder\xe1 en formato JSON."]})}),"\n",(0,s.jsxs)(e.p,{children:["Vamos a la terminal donde se esta corriendo ",(0,s.jsx)(e.code,{children:"bitcoind"})," y cancelamos su ejecuci\xf3n con ",(0,s.jsx)(e.code,{children:"ctrl + c"}),"."]}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsxs)(e.p,{children:["Dejar corriendo ",(0,s.jsx)(e.code,{children:"bitcoind"})," podria tardar muchas horas o incluso d\xedas en sincronizar el todo el blockchain."]})}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.p,{children:["Si en tu caso la aplicaci\xf3n que quieres desarrollar es solamente para Bitcoin, sin tocar la Lightning Network, puedes saltarte el resto de la gu\xeda. Y tus siguientes pasos seran terminar de sincronizar la blockchain con ",(0,s.jsx)(e.code,{children:"bitcoind"})," y luego seguir usando ",(0,s.jsx)(e.code,{children:"bitcoin-cli"}),"."]})}),"\n",(0,s.jsx)(e.h2,{id:"instalaci\xf3n-de-lightning",children:"Instalaci\xf3n de Lightning"}),"\n",(0,s.jsx)(e.p,{children:"Vamos a descargar el repositorio:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/ElementsProject/lightning.git\ncd lightning\n"})}),"\n",(0,s.jsx)(e.p,{children:"Compilamos e instalamos lightning:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"./configure --disable-rust\nmake -j15\nsudo make install\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:["En make -j15 estamos indicando que queremos usar 15 cores para compilar el software. Si no sabemos el numero de cores de nuestra pc podemos sustituirlo por ",(0,s.jsx)(e.code,{children:"make -j$(($(nproc)-1))"})," para usar los cores de nuestra pc dejando uno libre."]})}),"\n",(0,s.jsx)(e.p,{children:"Corremos la testnet de lighning (en realidad regtest, pero eso lo explicar\xe9 en otra gu\xeda):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:". contrib/startup_regtest.sh\n"})}),"\n",(0,s.jsxs)(e.p,{children:["El comando anterior es un script que va a correr ",(0,s.jsx)(e.code,{children:"bitcoind"}),", ",(0,s.jsx)(e.code,{children:"bitcion-cli"}),", ",(0,s.jsx)(e.code,{children:"lightningd"})," y ",(0,s.jsx)(e.code,{children:"lightning-cli"}),". Y nos va a dar la siguiente salida con unos comandos b\xe1sicos."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title=". contrib/startup_regtest.sh salida"',children:"Useful commands:\n  start_ln 3: start three nodes, l1, l2, l3\n  connect 1 2: connect l1 and l2\n  fund_nodes: connect all nodes with channels, in a row\n  stop_ln: shutdown\n  destroy_ln: remove ln directories\n"})}),"\n",(0,s.jsxs)(e.p,{children:["El comando ",(0,s.jsx)(e.code,{children:"start_ln"})," crear\xe1 un par de nodos en la red lightning (l1 y l2)."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"start_ln\n"})}),"\n",(0,s.jsx)(e.p,{children:"Tambien nos dar\xe1 una lista de comandos para interactuar con cada nodo:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title="start_ln salida"',children:'Bitcoin Core starting\nawaiting bitcoind...\nLoading "default" bitcoind wallet.\n[1] 10459\n[2] 10463\nCommands:\n        l1-cli, l1-log,\n        l2-cli, l2-log,\n        bt-cli, stop_ln, fund_nodes\ntimed out parsing log /tmp/l1/log\n'})}),"\n",(0,s.jsx)(e.p,{children:"Vamos a obtener la informaci\xf3n de uno de los nodos (l1)."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"l1-cli getinfo\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"Toda petici\xf3n realizada en lightning nos responder\xe1 en formato JSON."})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-JSON",metastring:'title="getinfo salida"',children:'{\n   "id": "02d44e9a844e84ab76d412601c8e648ce039b8266874ddfe5b854fb6723096ea06",\n   "alias": "SLICKERROUTE-v24.11-91-g9e29bde",\n   "color": "02d44e",\n   "num_peers": 0,\n   "num_pending_channels": 0,\n   "num_active_channels": 0,\n   "num_inactive_channels": 0,\n   "address": [],\n   "binding": [\n      {\n         "type": "ipv4",\n         "address": "127.0.0.1",\n         "port": 7171\n      }\n   ],\n   "version": "v24.11-91-g9e29bde",\n   "blockheight": 109,\n   "network": "regtest",\n   "fees_collected_msat": 0,\n   "lightning-dir": "/tmp/l1/regtest",\n   "our_features": {\n      "init": "8008a0882a8a59a1",\n      "node": "8088a0882a8a59a1",\n      "channel": "",\n      "invoice": "02000002024100"\n   }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"Ahora vamos a agregarle fondos (unos cuantos satoshis) a los nodos:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"fund_nodes\n"})}),"\n",(0,s.jsx)(e.p,{children:"Genial!!"}),"\n",(0,s.jsxs)(e.p,{children:["Obtenemos la informaci\xf3n de los fondos del nodo ",(0,s.jsx)(e.code,{children:"l1"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"l1-cli listfunds\n"})}),"\n",(0,s.jsxs)(e.p,{children:["La propiedad ",(0,s.jsx)(e.code,{children:"amount_msat"})," es el monto en satoshis."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-JSON",metastring:'title="listfunds salida"',children:'{\n   "outputs": [\n      {\n         "txid": "3383b42043c96d072f1a22f11ea1e4039bb93176f13d397178a6eb13cb7113e2",\n         "output": 1,\n         "amount_msat": 98999834000,\n         "scriptpubkey": "51200e98fba542bc6fda8cb83ae930cebd6f6957f3cb5d2eb49e47a6d0f612473efa",\n         "address": "bcrt1pp6v0hf2zh3ha4r9c8t5npn4ada540u7tt5htf8j85mg0vyj88maq9zy237",\n         "status": "confirmed",\n         "blockheight": 111,\n         "reserved": false\n      }\n   ],\n   "channels": [\n      {\n         "peer_id": "02fed4dea6a6bc7dcc8d7bb4c88aa452fc4cd3878949851b4c0c23e71eebfc751f",\n         "connected": true,\n         "state": "CHANNELD_NORMAL",\n         "channel_id": "8274abbaeb547055d57f07337965eadea778c7e0344dd6d1b55257746cd85288",\n         "short_channel_id": "111x1x0",\n         "our_amount_msat": 1000000000,\n         "amount_msat": 1100000000,\n         "funding_txid": "3383b42043c96d072f1a22f11ea1e4039bb93176f13d397178a6eb13cb7113e2",\n         "funding_output": 0\n      }\n   ]\n}\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsx)(e.p,{children:"\xa1Felicidades!! Ahora podemos construir aplicaciones sobre Bitcoin y Lightning Network.\n...bueno, mas o menos. Por lo menos podemos comenzar a experimentar con ello."})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}}}]);