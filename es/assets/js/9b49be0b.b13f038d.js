"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[4766],{2883(e,i,n){n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cross-cutting/smart-contracts/index","title":"Contratos Inteligentes","description":"Capacidades de contratos inteligentes en Bitcoin - Script, Miniscript, Tapscript, DLCs y covenants","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/cross-cutting/smart-contracts/index.md","sourceDirName":"cross-cutting/smart-contracts","slug":"/cross-cutting/smart-contracts/","permalink":"/es/docs/cross-cutting/smart-contracts/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Contratos Inteligentes","description":"Capacidades de contratos inteligentes en Bitcoin - Script, Miniscript, Tapscript, DLCs y covenants"},"sidebar":"guideSidebar","previous":{"title":"Sidechains y Layer 2","permalink":"/es/docs/cross-cutting/sidechains-l2/"},"next":{"title":"Libros","permalink":"/es/docs/resources/books"}}');var r=n(4848),t=n(8453);const c={sidebar_position:4,title:"Contratos Inteligentes",description:"Capacidades de contratos inteligentes en Bitcoin - Script, Miniscript, Tapscript, DLCs y covenants"},o="Contratos Inteligentes en Bitcoin",a={},d=[{value:"Bitcoin Script",id:"bitcoin-script",level:2},{value:"Lo Que Puedes Hacer Hoy",id:"lo-que-puedes-hacer-hoy",level:3},{value:"Miniscript",id:"miniscript",level:2},{value:"Por Qu\xe9 Importa Miniscript",id:"por-qu\xe9-importa-miniscript",level:3},{value:"Taproot y Tapscript",id:"taproot-y-tapscript",level:2},{value:"MAST (Merkelized Alternative Script Trees)",id:"mast-merkelized-alternative-script-trees",level:3},{value:"Tapscript",id:"tapscript",level:3},{value:"Discreet Log Contracts (DLCs)",id:"discreet-log-contracts-dlcs",level:2},{value:"Covenants (Propuestos)",id:"covenants-propuestos",level:2},{value:"OP_CHECKTEMPLATEVERIFY (CTV) \u2014 BIP-119",id:"op_checktemplateverify-ctv--bip-119",level:3},{value:"OP_CAT",id:"op_cat",level:3},{value:"BitVM",id:"bitvm",level:3},{value:"La Filosof\xeda de Contratos Inteligentes de Bitcoin",id:"la-filosof\xeda-de-contratos-inteligentes-de-bitcoin",level:2},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function l(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"contratos-inteligentes-en-bitcoin",children:"Contratos Inteligentes en Bitcoin"})}),"\n",(0,r.jsx)(i.p,{children:"Bitcoin siempre ha tenido contratos inteligentes \u2014 simplemente son diferentes de lo que podr\xedas esperar. El enfoque de Bitcoin prioriza seguridad, predictibilidad y minimalismo sobre expresividad. Cada transacci\xf3n de Bitcoin es un contrato inteligente."}),"\n",(0,r.jsxs)(i.p,{children:["Para temas relacionados, consulta ",(0,r.jsx)(i.a,{href:"/docs/tracks/application-developer/web3-bitcoin",children:"Web3 en Bitcoin"})," y ",(0,r.jsx)(i.a,{href:"/docs/tracks/application-developer/advanced-protocols",children:"Protocolos Avanzados"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"bitcoin-script",children:"Bitcoin Script"}),"\n",(0,r.jsxs)(i.p,{children:["El lenguaje de scripting nativo de Bitcoin es ",(0,r.jsx)(i.strong,{children:"basado en pila e intencionalmente no-Turing-completo"}),". Esto es una caracter\xedstica, no una limitaci\xf3n:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Ejecuci\xf3n predecible"})," \u2014 Sin bucles infinitos, uso de recursos acotado"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Verificaci\xf3n simple"})," \u2014 F\xe1cil razonar sobre qu\xe9 hace un script"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Seguridad"})," \u2014 Menor superficie de ataque que VMs de prop\xf3sito general"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"lo-que-puedes-hacer-hoy",children:"Lo Que Puedes Hacer Hoy"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Capacidad"}),(0,r.jsx)(i.th,{children:"Mecanismo"}),(0,r.jsx)(i.th,{children:"Ejemplo de Uso"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Firma multi-parte"})}),(0,r.jsx)(i.td,{children:"OP_CHECKMULTISIG, MuSig2"}),(0,r.jsx)(i.td,{children:"Wallets compartidos, escrow"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Pagos con timelock"})}),(0,r.jsx)(i.td,{children:"OP_CLTV, OP_CSV"}),(0,r.jsx)(i.td,{children:"Herencia, liberaciones programadas"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Pagos con hash-lock"})}),(0,r.jsx)(i.td,{children:"OP_HASH160 + OP_EQUAL"}),(0,r.jsx)(i.td,{children:"HTLCs (Lightning, atomic swaps)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Ejecuci\xf3n condicional"})}),(0,r.jsx)(i.td,{children:"OP_IF / OP_ELSE"}),(0,r.jsx)(i.td,{children:"M\xfaltiples rutas de gasto"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Verificaci\xf3n de firma"})}),(0,r.jsx)(i.td,{children:"OP_CHECKSIG, OP_CHECKSIGADD"}),(0,r.jsx)(i.td,{children:"Autorizaci\xf3n"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"miniscript",children:"Miniscript"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.a,{href:"https://bitcoin.sipa.be/miniscript/",children:"Miniscript"})," es un subconjunto estructurado de Bitcoin Script que permite ",(0,r.jsx)(i.strong,{children:"pol\xedticas de gasto componibles"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"Pol\xedtica: thresh(2, pk(Alice), pk(Bob), pk(Carol))\nResultado: multisig 2-de-3\n\nPol\xedtica: or(pk(Alice), and(pk(Bob), after(144)))\nResultado: Alice puede gastar en cualquier momento, O Bob puede gastar despu\xe9s de 144 bloques\n"})}),"\n",(0,r.jsx)(i.h3,{id:"por-qu\xe9-importa-miniscript",children:"Por Qu\xe9 Importa Miniscript"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Composabilidad"})," \u2014 Combinar condiciones con AND, OR, THRESHOLD"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"An\xe1lisis"})," \u2014 Determinar autom\xe1ticamente tama\xf1o de witness, condiciones de gasto"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Compilaci\xf3n"})," \u2014 Pol\xedtica \u2192 Bitcoin Script optimizado autom\xe1ticamente"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Interoperabilidad"})," \u2014 Los wallets pueden entender pol\xedticas de gasto arbitrarias"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Miniscript est\xe1 integrado en el wallet de Bitcoin Core y es la base de los wallets basados en descriptores."}),"\n",(0,r.jsx)(i.h2,{id:"taproot-y-tapscript",children:"Taproot y Tapscript"}),"\n",(0,r.jsx)(i.p,{children:"Taproot (BIP-341/342) expandi\xf3 significativamente las capacidades de contratos inteligentes de Bitcoin:"}),"\n",(0,r.jsx)(i.h3,{id:"mast-merkelized-alternative-script-trees",children:"MAST (Merkelized Alternative Script Trees)"}),"\n",(0,r.jsx)(i.p,{children:"M\xfaltiples condiciones de gasto organizadas en un \xe1rbol de Merkle. Solo la condici\xf3n usada se revela on-chain:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"                    [Taproot Key]\n                    /           \\\n            [Rama A]         [Rama B]\n            /        \\           |\n    [multisig 2-de-3] [Timelock] [Recuperaci\xf3n de emergencia]\n"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Privacidad"})," \u2014 Las ramas no usadas nunca se revelan"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Eficiencia"})," \u2014 Solo la rama ejecutada va on-chain"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Key path spending"})," \u2014 El caso m\xe1s com\xfan (gasto simple por clave) se ve como cualquier otro pago Taproot"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"tapscript",children:"Tapscript"}),"\n",(0,r.jsx)(i.p,{children:"Tapscript es la versi\xf3n de script usada dentro de Taproot, con mejoras:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"OP_CHECKSIGADD"})," reemplaza a ",(0,r.jsx)(i.code,{children:"OP_CHECKMULTISIG"})," (m\xe1s eficiente)"]}),"\n",(0,r.jsx)(i.li,{children:"La validaci\xf3n de firmas usa Schnorr"}),"\n",(0,r.jsxs)(i.li,{children:["Opcodes futuros pueden agregarse v\xeda ",(0,r.jsx)(i.code,{children:"OP_SUCCESSx"})]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"discreet-log-contracts-dlcs",children:"Discreet Log Contracts (DLCs)"}),"\n",(0,r.jsx)(i.p,{children:"Los DLCs permiten pagos condicionales basados en or\xe1culos sin revelar el contrato on-chain:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"1. Alice y Bob acuerdan un contrato (ej: precio de BTC > $100k en fecha X)\n2. Bloquean fondos en un multisig 2-de-2\n3. El or\xe1culo publica una attestation firmada del resultado\n4. El ganador usa la attestation para reclamar los fondos\n"})}),"\n",(0,r.jsx)(i.p,{children:"El or\xe1culo nunca se entera del contrato. Se pueden usar m\xfaltiples or\xe1culos para minimizaci\xf3n de confianza."}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Librer\xedas:"})," ",(0,r.jsx)(i.a,{href:"https://github.com/p2pderivatives/rust-dlc",children:"rust-dlc"}),", ",(0,r.jsx)(i.a,{href:"https://github.com/bennyhodl/dlcdevkit",children:"dlcdevkit"})]}),"\n",(0,r.jsx)(i.h2,{id:"covenants-propuestos",children:"Covenants (Propuestos)"}),"\n",(0,r.jsxs)(i.p,{children:["Los covenants restringir\xedan ",(0,r.jsx)(i.strong,{children:"c\xf3mo"})," un UTXO puede gastarse, no solo ",(0,r.jsx)(i.strong,{children:"qui\xe9n"})," puede gastarlo. Son el \xe1rea m\xe1s activa de investigaci\xf3n de contratos inteligentes en Bitcoin."]}),"\n",(0,r.jsx)(i.h3,{id:"op_checktemplateverify-ctv--bip-119",children:"OP_CHECKTEMPLATEVERIFY (CTV) \u2014 BIP-119"}),"\n",(0,r.jsx)(i.p,{children:"Compromete la transacci\xf3n exacta que gastar\xe1 una salida:"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Casos de uso:"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Vaults"})," \u2014 Retrasos de retiro con recuperaci\xf3n de emergencia"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Control de congesti\xf3n"})," \u2014 Pagos por lotes que se expanden despu\xe9s"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Payment pools"})," \u2014 UTXOs compartidos para m\xfaltiples usuarios"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"op_cat",children:"OP_CAT"}),"\n",(0,r.jsx)(i.p,{children:"Re-habilita el opcode de concatenaci\xf3n (deshabilitado por Satoshi en 2010). Combinado con firmas Schnorr, permite l\xf3gica de contratos sorprendentemente potente:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Construcciones de vaults"}),"\n",(0,r.jsx)(i.li,{children:"Introspecci\xf3n arbitraria de transacciones"}),"\n",(0,r.jsx)(i.li,{children:"Verificaci\xf3n de pruebas de Merkle en script"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"bitvm",children:"BitVM"}),"\n",(0,r.jsxs)(i.p,{children:["Un modelo de ",(0,r.jsx)(i.strong,{children:"computaci\xf3n optimista"})," para Bitcoin \u2014 programas arbitrarios pueden verificarse en Bitcoin sin un soft fork:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"El prover compromete el resultado de la computaci\xf3n"}),"\n",(0,r.jsx)(i.li,{children:"El verificador puede disputar v\xeda on-chain"}),"\n",(0,r.jsx)(i.li,{children:"Solo los resultados incorrectos requieren resoluci\xf3n on-chain"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"A\xfan en investigaci\xf3n/desarrollo temprano, pero potencialmente transformativo."}),"\n",(0,r.jsx)(i.h2,{id:"la-filosof\xeda-de-contratos-inteligentes-de-bitcoin",children:"La Filosof\xeda de Contratos Inteligentes de Bitcoin"}),"\n",(0,r.jsx)(i.p,{children:"El enfoque de Bitcoin es fundamentalmente diferente al de Ethereum:"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Bitcoin"}),(0,r.jsx)(i.th,{children:"Ethereum"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Verificar, no computar"}),(0,r.jsx)(i.td,{children:"Computar on-chain"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"No-Turing-completo"}),(0,r.jsx)(i.td,{children:"Turing-completo"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Modelo UTXO"}),(0,r.jsx)(i.td,{children:"Modelo de cuentas"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Ejecuci\xf3n off-chain preferida"}),(0,r.jsx)(i.td,{children:"Ejecuci\xf3n on-chain est\xe1ndar"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"M\xednimo, seguro"}),(0,r.jsx)(i.td,{children:"Expresivo, mayor superficie de ataque"})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:["La filosof\xeda de Bitcoin: ",(0,r.jsx)(i.strong,{children:"mover la complejidad off-chain, usar la blockchain solo para liquidaci\xf3n y resoluci\xf3n de disputas."})]}),"\n",(0,r.jsx)(i.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://bitcoin.sipa.be/miniscript/",children:"Miniscript (Pieter Wuille)"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki",children:"BIP-341: Taproot"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki",children:"BIP-119: OP_CTV"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://bitvm.org/bitvm.pdf",children:"BitVM Whitepaper"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/discreetlogcontracts/dlcspecs",children:"DLC Specification"})}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,i,n){n.d(i,{R:()=>c,x:()=>o});var s=n(6540);const r={},t=s.createContext(r);function c(e){const i=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);