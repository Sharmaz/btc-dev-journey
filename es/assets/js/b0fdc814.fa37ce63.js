"use strict";(globalThis.webpackChunkbtc_dev_journey=globalThis.webpackChunkbtc_dev_journey||[]).push([[3033],{4531(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"fundamentals/bitcoin-architecture/index","title":"Arquitectura de Bitcoin","description":"Entendiendo el modelo UTXO, transacciones y Bitcoin Script","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/fundamentals/02-bitcoin-architecture/index.md","sourceDirName":"fundamentals/02-bitcoin-architecture","slug":"/fundamentals/bitcoin-architecture/","permalink":"/es/docs/fundamentals/bitcoin-architecture/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Arquitectura de Bitcoin","description":"Entendiendo el modelo UTXO, transacciones y Bitcoin Script"},"sidebar":"guideSidebar","previous":{"title":"Fundamentos de Bitcoin","permalink":"/es/docs/fundamentals/bitcoin-fundamentals/"},"next":{"title":"Red P2P","permalink":"/es/docs/fundamentals/p2p-network/"}}');var c=i(4848),r=i(8453);const a={sidebar_position:3,title:"Arquitectura de Bitcoin",description:"Entendiendo el modelo UTXO, transacciones y Bitcoin Script"},t="Arquitectura de Bitcoin",d={},o=[{value:"El Modelo UTXO",id:"el-modelo-utxo",level:2},{value:"C\xf3mo Funciona",id:"c\xf3mo-funciona",level:3},{value:"Por Qu\xe9 los UTXOs Importan para los Desarrolladores",id:"por-qu\xe9-los-utxos-importan-para-los-desarrolladores",level:3},{value:"Transacciones",id:"transacciones",level:2},{value:"Entradas",id:"entradas",level:3},{value:"Salidas",id:"salidas",level:3},{value:"Tipos de Transacci\xf3n",id:"tipos-de-transacci\xf3n",level:3},{value:"SegWit y Taproot",id:"segwit-y-taproot",level:3},{value:"Bitcoin Script",id:"bitcoin-script",level:2},{value:"C\xf3mo Funciona Script",id:"c\xf3mo-funciona-script",level:3},{value:"Opcodes Comunes",id:"opcodes-comunes",level:3},{value:"Ejemplo: Ejecuci\xf3n de Script P2PKH",id:"ejemplo-ejecuci\xf3n-de-script-p2pkh",level:3},{value:"Lectura Recomendada",id:"lectura-recomendada",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"arquitectura-de-bitcoin",children:"Arquitectura de Bitcoin"})}),"\n",(0,c.jsx)(n.p,{children:"Esta secci\xf3n cubre las estructuras de datos fundamentales de Bitcoin: c\xf3mo se representa el valor, c\xf3mo funcionan las transacciones y c\xf3mo el lenguaje de scripting de Bitcoin permite dinero programable."}),"\n",(0,c.jsx)(n.h2,{id:"el-modelo-utxo",children:"El Modelo UTXO"}),"\n",(0,c.jsxs)(n.p,{children:["Bitcoin no usa cuentas y saldos como un banco. En su lugar, usa ",(0,c.jsx)(n.strong,{children:"UTXOs"})," (Unspent Transaction Outputs \u2014 Salidas de Transacci\xf3n No Gastadas)."]}),"\n",(0,c.jsx)(n.h3,{id:"c\xf3mo-funciona",children:"C\xf3mo Funciona"}),"\n",(0,c.jsx)(n.p,{children:'Piensa en los UTXOs como monedas y billetes f\xedsicos. Cuando "tienes" 1.5 BTC, no tienes una cuenta con un saldo de 1.5 BTC \u2014 tienes uno o m\xe1s UTXOs que suman 1.5 BTC. Por ejemplo:'}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"UTXO A: 1.0 BTC (de un pago que recibiste)"}),"\n",(0,c.jsx)(n.li,{children:"UTXO B: 0.5 BTC (cambio de una transacci\xf3n anterior)"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["Cuando gastas Bitcoin, ",(0,c.jsx)(n.strong,{children:"consumes"})," UTXOs completos como entradas y creas nuevos UTXOs como salidas:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Entradas (consumidas):         Salidas (creadas):\n  UTXO A: 1.0 BTC    \u2192       0.7 BTC al destinatario\n                              0.2999 BTC de vuelta a ti (cambio)\n                              0.0001 BTC comisi\xf3n (impl\xedcita)\n"})}),"\n",(0,c.jsxs)(n.p,{children:["El UTXO de entrada se destruye. Se crean dos nuevos UTXOs: uno para el destinatario, uno como cambio de vuelta a ti. La diferencia entre entradas y salidas es la ",(0,c.jsx)(n.strong,{children:"comisi\xf3n de transacci\xf3n"})," pagada a los mineros."]}),"\n",(0,c.jsx)(n.h3,{id:"por-qu\xe9-los-utxos-importan-para-los-desarrolladores",children:"Por Qu\xe9 los UTXOs Importan para los Desarrolladores"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Privacidad"}),' \u2014 Cada UTXO es independiente; no se expone un "saldo" \xfanico']}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Paralelismo"})," \u2014 Los UTXOs se pueden gastar independientemente, permitiendo validaci\xf3n paralela"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Selecci\xf3n de monedas"})," \u2014 Los wallets deben elegir qu\xe9 UTXOs gastar (un algoritmo no trivial)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Dust"})," \u2014 UTXOs muy peque\xf1os cuestan m\xe1s en comisiones de lo que valen para gastarlos"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"transacciones",children:"Transacciones"}),"\n",(0,c.jsx)(n.p,{children:"Una transacci\xf3n de Bitcoin es una estructura de datos con:"}),"\n",(0,c.jsx)(n.h3,{id:"entradas",children:"Entradas"}),"\n",(0,c.jsxs)(n.p,{children:["Cada entrada referencia una salida de transacci\xf3n previa (por txid e \xedndice de salida) y proporciona un ",(0,c.jsx)(n.strong,{children:"script"})," que satisface las condiciones de gasto:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'{\n  "txid": "abc123...",\n  "vout": 0,\n  "scriptSig": "<signature> <pubkey>"\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"salidas",children:"Salidas"}),"\n",(0,c.jsxs)(n.p,{children:["Cada salida especifica un monto y un ",(0,c.jsx)(n.strong,{children:"script de bloqueo"})," (las condiciones que deben cumplirse para gastarla):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'{\n  "value": 0.5,\n  "scriptPubKey": "OP_DUP OP_HASH160 <pubkeyhash> OP_EQUALVERIFY OP_CHECKSIG"\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"tipos-de-transacci\xf3n",children:"Tipos de Transacci\xf3n"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Tipo"}),(0,c.jsx)(n.th,{children:"Descripci\xf3n"}),(0,c.jsx)(n.th,{children:"Uso Com\xfan"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"P2PKH"})}),(0,c.jsx)(n.td,{children:"Pay to Public Key Hash"}),(0,c.jsx)(n.td,{children:"Direcciones legacy (1...)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"P2SH"})}),(0,c.jsx)(n.td,{children:"Pay to Script Hash"}),(0,c.jsx)(n.td,{children:"Multisig, SegWit envuelto (3...)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"P2WPKH"})}),(0,c.jsx)(n.td,{children:"Pay to Witness Public Key Hash"}),(0,c.jsx)(n.td,{children:"SegWit nativo (bc1q...)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"P2WSH"})}),(0,c.jsx)(n.td,{children:"Pay to Witness Script Hash"}),(0,c.jsx)(n.td,{children:"Multisig SegWit"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.strong,{children:"P2TR"})}),(0,c.jsx)(n.td,{children:"Pay to Taproot"}),(0,c.jsx)(n.td,{children:"Direcciones Taproot (bc1p...)"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"segwit-y-taproot",children:"SegWit y Taproot"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Segregated Witness (SegWit)"}),', activado en 2017, movi\xf3 los datos de firma a una estructura "witness" separada. Esto corrigi\xf3 la maleabilidad de transacciones y aument\xf3 efectivamente la capacidad de los bloques.']}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Taproot"}),", activado en 2021, introdujo firmas Schnorr y MAST (Merkelized Alternative Script Trees). Esto mejora la privacidad (scripts complejos se ven como pagos simples) y la eficiencia."]}),"\n",(0,c.jsx)(n.h2,{id:"bitcoin-script",children:"Bitcoin Script"}),"\n",(0,c.jsx)(n.p,{children:"Bitcoin tiene su propio lenguaje de scripting \u2014 un lenguaje simple, basado en pila, intencionalmente no-Turing-completo para definir condiciones de gasto."}),"\n",(0,c.jsx)(n.h3,{id:"c\xf3mo-funciona-script",children:"C\xf3mo Funciona Script"}),"\n",(0,c.jsxs)(n.p,{children:["Cuando una transacci\xf3n se valida, el ",(0,c.jsx)(n.strong,{children:"script de desbloqueo"})," (scriptSig/witness) se combina con el ",(0,c.jsx)(n.strong,{children:"script de bloqueo"})," (scriptPubKey) y se ejecuta en una m\xe1quina de pila. Si la ejecuci\xf3n tiene \xe9xito (deja ",(0,c.jsx)(n.code,{children:"true"})," en la pila), el gasto es v\xe1lido."]}),"\n",(0,c.jsx)(n.h3,{id:"opcodes-comunes",children:"Opcodes Comunes"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Opcode"}),(0,c.jsx)(n.th,{children:"Descripci\xf3n"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_DUP"})}),(0,c.jsx)(n.td,{children:"Duplicar el elemento superior de la pila"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_HASH160"})}),(0,c.jsx)(n.td,{children:"Hashear el elemento superior con SHA-256 luego RIPEMD-160"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_EQUALVERIFY"})}),(0,c.jsx)(n.td,{children:"Verificar igualdad, fallar si no es igual"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_CHECKSIG"})}),(0,c.jsx)(n.td,{children:"Verificar una firma contra una clave p\xfablica"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_CHECKMULTISIG"})}),(0,c.jsx)(n.td,{children:"Verificar multisig M-de-N"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_CHECKLOCKTIMEVERIFY"})}),(0,c.jsx)(n.td,{children:"Time-lock: la salida no puede gastarse antes de un tiempo/bloque"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_CHECKSEQUENCEVERIFY"})}),(0,c.jsx)(n.td,{children:"Time-lock relativo"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"OP_IF / OP_ELSE / OP_ENDIF"})}),(0,c.jsx)(n.td,{children:"Ejecuci\xf3n condicional"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"ejemplo-ejecuci\xf3n-de-script-p2pkh",children:"Ejemplo: Ejecuci\xf3n de Script P2PKH"}),"\n",(0,c.jsxs)(n.p,{children:["Script de bloqueo: ",(0,c.jsx)(n.code,{children:"OP_DUP OP_HASH160 <pubKeyHash> OP_EQUALVERIFY OP_CHECKSIG"})]}),"\n",(0,c.jsxs)(n.p,{children:["Script de desbloqueo: ",(0,c.jsx)(n.code,{children:"<sig> <pubKey>"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Ejecuci\xf3n en pila:\n1. Push <sig>           \u2192 [sig]\n2. Push <pubKey>        \u2192 [sig, pubKey]\n3. OP_DUP               \u2192 [sig, pubKey, pubKey]\n4. OP_HASH160            \u2192 [sig, pubKey, hash(pubKey)]\n5. Push <pubKeyHash>    \u2192 [sig, pubKey, hash(pubKey), pubKeyHash]\n6. OP_EQUALVERIFY        \u2192 [sig, pubKey]  (hashes coinciden \u2713)\n7. OP_CHECKSIG           \u2192 [true]         (firma v\xe1lida \u2713)\n"})}),"\n",(0,c.jsx)(n.h2,{id:"lectura-recomendada",children:"Lectura Recomendada"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://learnmeabitcoin.com/",children:"Learn Me a Bitcoin"})," \u2014 Explicaciones visuales de transacciones y script"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://en.bitcoin.it/wiki/Script",children:"Bitcoin Script Wiki"})," \u2014 Referencia completa de opcodes"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki",children:"BIP-141 (SegWit)"})," \u2014 Especificaci\xf3n de Segregated Witness"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki",children:"BIP-341 (Taproot)"})," \u2014 Especificaci\xf3n de Taproot"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const c={},r=s.createContext(c);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);